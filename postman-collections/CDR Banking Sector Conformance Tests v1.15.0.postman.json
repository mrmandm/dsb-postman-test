{
	"info": {
		"_postman_id": "583368aa-92c1-46e1-bedf-4393f046b5dc",
		"name": "CDR Banking Sector Conformance Tests v1.15.0",
		"description": "# CDR Conformance Tests\nThis collection contains a series of conformance tests for the Consumer Data Right standards applicable to the designation for the Banking sector in Australia.\n\nThese tests do not constitute a full functional test of an implementation compliant with CDR standards. It is the obligation of data holders and data recipients to functionally test their implementations fully using whatever mechanism they choose.\n\nThese tests do contain comprehensive coverage of the requirements of the standards.  A data holder implementation that is able to pass all of the tests in this collection could be reasonably described as conformant to the CDR standards for the Banking sector.\n\n# Conformance Scope\nThis collection complies with v1.11.0 of the CDR standards.\n\nIt includes support for the following API end points:\n\n### Banking APIs\n\n* Get Accounts\n* Get Bulk Balances\n* Get Balances For Specific Accounts\n* Get Account Balance\n* Get Account Details\n* Get Transactions For Account\n* Get Transaction Detail\n* Get Direct Debits For Accounts\n* Get Bulk Direct Debits\n* Get Direct Debits For Specific Accounts\n* Get Scheduled Payments For Accounts\n* Get Scheduled Payments Bulk\n* Get Scheduled Payments For Specific Accounts\n* Get Payees\n* Get Payee Details\n* Get Products\n* Get Product Detail\n\n### Common APIs\n* Get Customer\n* Get Customer Detail\n* Get Status\n* Get Outages\n\n\n# Scope Exclusions\nThis collections does not cover:\n* CDR API end points not listed above\n* Negative scenarios that are not specifically addressed in the standards for individual end points\n* Non-functional requirements\n* Information Security Profile and associated end points\n* MA-SSL configuration\n\n# Change Log\n| Change Date | Change Description |\n|-------------|--------------------|\n|1st November 2019|Initial creation of the collection|\n|1st August 2021  |Updated documentation|\n\n\n# Contact Support: \n{\n\nName : Consumer Data Standards\n\nEmail : cdr-data61@csiro.au\n\n}",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Basic Schema Tests",
			"item": [
				{
					"name": "banking",
					"item": [
						{
							"name": "accounts",
							"item": [
								{
									"name": "direct-debits",
									"item": [
										{
											"name": "Get Bulk Direct Debits - First Page",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        // Parse the response body\r",
															"        var jsonData;\r",
															"        try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"\r",
															"        // HTTP Response and headers\r",
															"        pm.test(\"Status code is 200\", function () {\r",
															"            pm.response.to.have.status(200);\r",
															"        });\r",
															"\r",
															"        pm.test(\"Content-Type header specifies json\", function () {\r",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-v header is present and has correct value\", function () {\r",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"            var checkValue = Math.min(requestXv, requestMinXv);\r",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"            pm.expect(responseXv).gte(checkValue);\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"        });\r",
															"\r",
															"\r",
															"        // Pagination tests\r",
															"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"            pm.expect(jsonData.meta.totalPages >= 0);\r",
															"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"        });\r",
															"\r",
															"        var currentPage = pm.variables.get(\"currentPage\");\r",
															"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"        // set the total records in a global variable to be accessible from other calla\r",
															"        pm.variables.set(\"totalDirectDebitPages\", currentTotalPages);\r",
															"\r",
															"        // If the \r",
															"        if (currentPageSize >=  currentTotalRecords) {\r",
															"            postman.setNextRequest(\"Get Direct Debits For Specific Accounts - First Page\");\r",
															"        }\r",
															"\r",
															"        //var isMultiPage = (jsonData.meta?.totalPages > 1);\r",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"        });\r",
															"\r",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"        });\r",
															"\r",
															"        // Schema payload check\r",
															"        pm.test('Response payload conforms to standards schema', function() {\r",
															"            const valid = ajv.validate(\"ResponseBankingDirectDebitAuthorisationList\", jsonData)\r",
															"            if (!valid){\r",
															"            ajv.errors.forEach(element => {\r",
															"                console.log(JSON.stringify(element));\r",
															"                });\r",
															"            };\r",
															"            pm.expect(valid).to.be.true; \r",
															"        });\r",
															"}\r",
															"else {\r",
															"    console.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"// First page is always 1\r",
															"pm.variables.set(\"currentPage\", 1);\r",
															"// if a page size is specified use it, otherwise default\r",
															"var pageSize = pm.variables.get(\"pageSizeBulkDirectDebits\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "5c190b2b-7c29-47b4-ae92-7dbd4e6c257e",
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text",
														"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text",
														"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text",
														"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction."
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text",
														"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls."
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text",
														"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls."
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text",
														"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls."
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text",
														"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls."
													}
												],
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/direct-debits?product-category=CRED_AND_CHRG_CARDS&open-status=ALL&is-owned=true&page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														"direct-debits"
													],
													"query": [
														{
															"key": "product-category",
															"value": "CRED_AND_CHRG_CARDS",
															"description": "Used to filter results on the productCategory field applicable to accounts. Any one of the valid values for this field can be supplied. If absent then all accounts returned."
														},
														{
															"key": "open-status",
															"value": "ALL",
															"description": "Used to filter results according to open/closed status. Values can be OPEN, CLOSED or ALL. If absent then ALL is assumed"
														},
														{
															"key": "is-owned",
															"value": "true",
															"description": "Filters accounts based on whether they are owned by the authorised customer.  True for owned accounts, false for unowned accounts and absent for all accounts"
														},
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													]
												},
												"description": "Obtain direct debit authorisations for multiple, filtered accounts"
											},
											"response": []
										},
										{
											"name": "Get Bulk Direct Debits - Other Pages",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        // This will set the next request depending on if there are any pages left to be processed\r",
															"        const pageArray = pm.variables.get(\"pageArray\");\r",
															"        if (pageArray && pageArray.length > 0){\r",
															"            postman.setNextRequest(\"Get Bulk Direct Debits - Other pages\");\r",
															"            } else {\r",
															"                postman.setNextRequest(\"Get Direct Debits For Specific Accounts - First Page\");       \r",
															"            }\r",
															"        // Parse the response body\r",
															"        var jsonData;\r",
															"        try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"\r",
															"        // HTTP Response and headers\r",
															"        pm.test(\"Status code is 200\", function () {\r",
															"            pm.response.to.have.status(200);\r",
															"        });\r",
															"\r",
															"        pm.test(\"Content-Type header specifies json\", function () {\r",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-v header is present and has correct value\", function () {\r",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"            var checkValue = Math.min(requestXv, requestMinXv);\r",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"            pm.expect(responseXv).gte(checkValue);\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"        });\r",
															"\r",
															"        // Pagination tests\r",
															"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"            pm.expect(jsonData.meta.totalPages >= 0);\r",
															"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"        });\r",
															"\r",
															"        var currentPage = pm.variables.get(\"currentPage\");\r",
															"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"        // set the total records in a global variable to be accessible from other calla\r",
															"        pm.collectionVariables.set(\"totalDirectDebitPages\", currentTotalPages);\r",
															"        if (currentPageSize >=  currentTotalRecords) {\r",
															"            postman.setNextRequest(\"Get Direct Debits For Specific Accounts\");\r",
															"        }\r",
															"\r",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"        });\r",
															"\r",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"        });\r",
															"\r",
															"        // Schema payload check\r",
															"        pm.test('Response payload conforms to standards schema', function() {\r",
															"            const valid = ajv.validate(\"ResponseBankingDirectDebitAuthorisationList\", jsonData)\r",
															"            if (!valid){\r",
															"            ajv.errors.forEach(element => {\r",
															"                console.log(JSON.stringify(element));\r",
															"                });\r",
															"            };\r",
															"            pm.expect(valid).to.be.true; \r",
															"        });\r",
															"\r",
															"} else {\r",
															"    console.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															"\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"var pageSize = pm.variables.get(\"pageSizeBulkDirectDebits\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}\r",
															"var totalPages = pm.variables.get(\"totalDirectDebitPages\");\r",
															"var pageArray = pm.variables.get(\"pageArray\");\r",
															"\r",
															"if(!pageArray || pageArray.length == 0) {\r",
															"    pageArray = [];\r",
															"    for(var i = 1; i <= totalPages; i++)\r",
															"        pageArray.push(i);\r",
															"}\r",
															"\r",
															"let currentPage = pageArray.shift();\r",
															"if (currentPage == null) {pm.variables.set(\"currentPage\", 1)} else {\r",
															"    pm.variables.set(\"currentPage\", currentPage);\r",
															"}\r",
															"pm.variables.set(\"pageArray\", pageArray);\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "a729849d-4041-4097-9d42-84d805ef5dcd",
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text",
														"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text",
														"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text",
														"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction."
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text",
														"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls."
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text",
														"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls."
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text",
														"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls."
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text",
														"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls."
													}
												],
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/direct-debits?product-category=BUSINESS_LOANS&open-status=ALL&is-owned=true&page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														"direct-debits"
													],
													"query": [
														{
															"key": "product-category",
															"value": "BUSINESS_LOANS",
															"description": "Used to filter results on the productCategory field applicable to accounts. Any one of the valid values for this field can be supplied. If absent then all accounts returned."
														},
														{
															"key": "open-status",
															"value": "ALL",
															"description": "Used to filter results according to open/closed status. Values can be OPEN, CLOSED or ALL. If absent then ALL is assumed"
														},
														{
															"key": "is-owned",
															"value": "true",
															"description": "Filters accounts based on whether they are owned by the authorised customer.  True for owned accounts, false for unowned accounts and absent for all accounts"
														},
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Get Direct Debits For Specific Accounts - First Page",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        // Parse the response body\r",
															"        var jsonData;\r",
															"        try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"\r",
															"        // HTTP Response and headers\r",
															"        pm.test(\"Status code is 200\", function () {\r",
															"            pm.response.to.have.status(200);\r",
															"        });\r",
															"\r",
															"        pm.test(\"Content-Type header specifies json\", function () {\r",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"        });\r",
															"\r",
															"\r",
															"        pm.test(\"x-v header is present and has correct value\", function () {\r",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"            var checkValue = Math.min(requestXv, requestMinXv);\r",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"            pm.expect(responseXv).gte(checkValue);\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"        });\r",
															"\r",
															"        var currentPage = pm.variables.get(\"currentPage\");\r",
															"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"        // set the total records in a global variable to be accessible from other calla\r",
															"        pm.variables.set(\"totalDirectDebitPages\", currentTotalPages);\r",
															"        if (currentPageSize >=  currentTotalRecords) {\r",
															"            postman.setNextRequest(\"Get Bulk Balances - First page\");\r",
															"        }\r",
															"\r",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"        });\r",
															"\r",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"        });\r",
															"\r",
															"        // Schema payload check\r",
															"        pm.test('Response payload conforms to standards schema', function() { \r",
															"            const valid = ajv.validate(\"ResponseBankingDirectDebitAuthorisationList\", jsonData)\r",
															"            if (!valid){\r",
															"            ajv.errors.forEach(element => {\r",
															"                console.log(JSON.stringify(element));\r",
															"                });\r",
															"            };\r",
															"            pm.expect(valid).to.be.true; \r",
															"        });\r",
															"\r",
															"} else {\r",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"currentPage\", 1);\r",
															"var pageSize = pm.variables.get(\"pageSizeBulkDirectDebits\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "907e78a4-0e35-44fe-a1c4-8fe4d269b99b",
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"data\": {\r\n        \"accountIds\": [\r\n            \"{{testAccountId1}}\",\r\n            \"{{testAccountId2}}\"\r\n        ]\r\n    },\r\n    \"meta\": {}\r\n}"
												},
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/direct-debits?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														"direct-debits"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Get Direct Debits For Specific Accounts - Other Pages",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        // This will set the next request depending on if there are any pages left to be processed\r",
															"        const pageArray = pm.variables.get(\"pageArray\");\r",
															"        if (pageArray && pageArray.length > 0){\r",
															"            postman.setNextRequest(\"Get Direct Debits For Specific Accounts - Other Pages\");\r",
															"            } else {\r",
															"                postman.setNextRequest(\"Get Bulk Balances - First page\");       \r",
															"        }\r",
															"\r",
															"        // Parse the response body\r",
															"        var jsonData;\r",
															"        try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"\r",
															"\r",
															"        // HTTP Response and headers\r",
															"        pm.test(\"Status code is 200\", function () {\r",
															"            pm.response.to.have.status(200);\r",
															"        });\r",
															"\r",
															"        pm.test(\"Content-Type header specifies json\", function () {\r",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-v header is present and has correct value\", function () {\r",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"            var checkValue = Math.min(requestXv, requestMinXv);\r",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"            pm.expect(responseXv).gte(checkValue);\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"        });\r",
															"\r",
															"        // Pagination tests\r",
															"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"            pm.expect(jsonData.meta.totalPages >= 0);\r",
															"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"        });\r",
															"\r",
															"        var currentPage = pm.variables.get(\"currentPage\");\r",
															"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"\r",
															"        // set the total records in a global variable to be accessible from other calla\r",
															"        pm.collectionVariables.set(\"totalDirectDebitPages\", currentTotalPages);\r",
															"        if (currentPageSize >=  currentTotalRecords) {\r",
															"            postman.setNextRequest(\"Get Direct Debits For Specific Accounts\");\r",
															"        }\r",
															"\r",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"        });\r",
															"\r",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"        });\r",
															"\r",
															"\r",
															"        // Schema payload check\r",
															"        pm.test('Response payload conforms to standards schema', function() {\r",
															"            const valid = ajv.validate(\"ResponseBankingDirectDebitAuthorisationList\", jsonData)\r",
															"            if (!valid){\r",
															"            ajv.errors.forEach(element => {\r",
															"                console.log(JSON.stringify(element));\r",
															"                });\r",
															"            };\r",
															"            pm.expect(valid).to.be.true; \r",
															"        });\r",
															"\r",
															"} else {\r",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"\r",
															"var pageSize = pm.variables.get(\"pageSizeBulkDirectDebits\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}\r",
															"var totalPages = pm.variables.get(\"totalDirectDebitPages\");\r",
															"var pageArray = pm.variables.get(\"pageArray\");\r",
															"\r",
															"if(!pageArray || pageArray.length == 0) {\r",
															"    pageArray = [];\r",
															"    for(var i = 1; i <= totalPages; i++)\r",
															"        pageArray.push(i);\r",
															"}\r",
															"\r",
															"let currentPage = pageArray.shift();\r",
															"if (currentPage == null) {pm.variables.set(\"currentPage\", 1)} else {\r",
															"    pm.variables.set(\"currentPage\", currentPage);\r",
															"}\r",
															"pm.variables.set(\"pageArray\", pageArray);"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "52ffe712-c3aa-4832-a685-acd591e777b0",
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\r\n    \"data\": {\r\n        \"accountIds\": [\r\n            \"{{testAccountId1}}\",\r\n            \"{{testAccountId2}}\"\r\n        ]\r\n    },\r\n    \"meta\": {}\r\n}"
												},
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/direct-debits?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														"direct-debits"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}"
														}
													]
												}
											},
											"response": []
										}
									],
									"id": "5431ea6f-b402-44d7-ae4c-6256353add21"
								},
								{
									"name": "balances",
									"item": [
										{
											"name": "Get Bulk Balances - First page",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"",
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
															"{",
															"        // Parse the response body",
															"        var jsonData;",
															"        try { jsonData = pm.response.json(); } catch(e) {}",
															"",
															"",
															"        // HTTP Response and headers",
															"        pm.test(\"Status code is 200\", function () {",
															"            pm.response.to.have.status(200);",
															"        });",
															"",
															"        pm.test(\"Content-Type header specifies json\", function () {",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
															"        });",
															"",
															"        pm.test(\"x-v header is present and has correct value\", function () {",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
															"            var checkValue = Math.min(requestXv, requestMinXv);",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
															"            pm.expect(responseXv).gte(checkValue);",
															"        });",
															"",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
															"        });",
															"",
															"        // Pagination tests",
															"        pm.test(\"Pagination fields in meta data are present\", function () {",
															"            pm.expect(jsonData.meta.totalPages >= 0);",
															"            pm.expect(jsonData.meta.totalRecords >= 0);",
															"        });",
															"",
															"        var currentPage = pm.variables.get(\"currentPage\");",
															"        var currentPageSize = pm.variables.get(\"pageSize\");",
															"        var currentTotalPages = jsonData?.meta?.totalPages;",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;",
															"",
															"        // set the total records in a global variable to be accessible from other calla",
															"        pm.variables.set(\"totalBulkBalancePages\", currentTotalPages);",
															"        if (currentPageSize >=  currentTotalRecords) {",
															"            postman.setNextRequest(\"Get Bulk Balances: Single Page\");",
															"        }",
															"",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;",
															"",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"        });",
															"",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"            pm.expect(jsonData.links).to.have.property(\"next\");",
															"            pm.expect(jsonData.links).to.have.property(\"last\");",
															"        });",
															"",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"            pm.expect(jsonData.links).to.have.property(\"first\");",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");",
															"            pm.expect(jsonData.links).to.have.property(\"next\");",
															"            pm.expect(jsonData.links).to.have.property(\"last\");",
															"        });",
															"",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"            pm.expect(jsonData.links).to.have.property(\"first\");",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");",
															"        });",
															"",
															"        // Schema payload check",
															"        pm.test('Response payload conforms to standards schema', function() {",
															"            const valid = ajv.validate(\"ResponseBankingAccountsBalanceList\", jsonData)",
															"            if (!valid){",
															"            ajv.errors.forEach(element => {",
															"                console.log(JSON.stringify(element));",
															"                });",
															"            };",
															"            pm.expect(valid).to.be.true; ",
															"        });        ",
															"",
															"} else {",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
															"}",
															"",
															"",
															"",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"currentPage\", 1);\r",
															"var pageSize = pm.variables.get(\"pageSizeBulkBalances\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "e922b6d7-909a-45a4-b32f-c4f9f041e838",
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/balances?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														"balances"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}"
														}
													]
												},
												"description": "Obtain balances for multiple, filtered accounts"
											},
											"response": []
										},
										{
											"name": "Get Bulk Balances - Other pages",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"var pageSize = pm.variables.get(\"pageSizeBulkBalances\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}\r",
															"\r",
															"var totalPages = pm.variables.get(\"totalBulkBalancePages\");\r",
															"var pageArray = pm.collectionVariables.get(\"pageArray\");\r",
															"\r",
															"if(!pageArray || pageArray.length == 0) {\r",
															"    pageArray = [];\r",
															"    for(var i = 1; i <= totalPages; i++)\r",
															"        pageArray.push(i);\r",
															"}\r",
															"\r",
															"let currentPage = pageArray.shift();\r",
															"if (currentPage == null) {pm.variables.set(\"currentPage\", 1)} else {\r",
															"    pm.variables.set(\"currentPage\", currentPage);\r",
															"}\r",
															"pm.collectionVariables.set(\"pageArray\", pageArray);\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
															"{",
															"        // This will set the next request depending on if there are any pages left to be processed",
															"        const pageArray = pm.variables.get(\"pageArray\");",
															"        if (pageArray && pageArray.length > 0){",
															"            postman.setNextRequest(\"Get Bulk Balances - Other pages\");",
															"            } else {",
															"                postman.setNextRequest(\"Get Balances For Specific Accounts - First page\");       ",
															"            }",
															"",
															"        // Parse the response body",
															"        var jsonData;",
															"        try { jsonData = pm.response.json(); } catch(e) {}",
															"",
															"        pm.request.url.query.get(\"page\")",
															"        // HTTP Response and headers",
															"        pm.test(\"Status code is 200\", function () {",
															"            pm.response.to.have.status(200);",
															"        });",
															"",
															"        pm.test(\"Content-Type header specifies json\", function () {",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
															"        });",
															"",
															"        pm.test(\"x-v header is present and has correct value\", function () {",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
															"            var checkValue = Math.min(requestXv, requestMinXv);",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
															"            pm.expect(responseXv).gte(checkValue);",
															"        });",
															"",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
															"        });",
															"",
															"        // Pagination tests",
															"        pm.test(\"Pagination fields in meta data are present\", function () {",
															"            pm.expect(jsonData.meta.totalPages >= 0);",
															"            pm.expect(jsonData.meta.totalRecords >= 0);",
															"        });",
															"",
															"        var currentPage = pm.variables.get(\"currentPage\");",
															"        var currentPageSize = pm.variables.get(\"pageSize\");",
															"        var currentTotalPages = jsonData?.meta?.totalPages;",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;",
															"        // set the total records in a global variable to be accessible from other calla",
															"        pm.variables.set(\"totalBulkBalancePages\", currentTotalPages);",
															"",
															"",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;",
															"",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"        });",
															"",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"            pm.expect(jsonData.links).to.have.property(\"next\");",
															"            pm.expect(jsonData.links).to.have.property(\"last\");",
															"        });",
															"",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"            pm.expect(jsonData.links).to.have.property(\"first\");",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");",
															"            pm.expect(jsonData.links).to.have.property(\"next\");",
															"            pm.expect(jsonData.links).to.have.property(\"last\");",
															"        });",
															"",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"            pm.expect(jsonData.links).to.have.property(\"first\");",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");",
															"        });",
															"",
															"        // Schema payload check",
															"        pm.test('Response payload conforms to standards schema', function() {",
															"            const valid = ajv.validate(\"ResponseBankingAccountsBalanceList\", jsonData)",
															"            if (!valid){",
															"            ajv.errors.forEach(element => {",
															"                console.log(JSON.stringify(element));",
															"                });",
															"            };",
															"            pm.expect(valid).to.be.true; ",
															"        });   ",
															"} else {",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
															"}",
															"",
															"",
															"",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "4955bbcb-3dff-46c8-80df-6561ccbfe6f7",
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/balances?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														"balances"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Get Bulk Balances: Single Page",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
															"{",
															"        // Parse the response body",
															"        var jsonData;",
															"        try { jsonData = pm.response.json(); } catch(e) {}",
															"",
															"",
															"        // HTTP Response and headers",
															"        pm.test(\"Status code is 200\", function () {",
															"            pm.response.to.have.status(200);",
															"        });",
															"",
															"        pm.test(\"Content-Type header specifies json\", function () {",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
															"        });",
															"",
															"        pm.test(\"x-v header is present and has correct value\", function () {",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
															"            var checkValue = Math.min(requestXv, requestMinXv);",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
															"            pm.expect(responseXv).gte(checkValue);",
															"        });",
															"",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
															"        });",
															"",
															"",
															"        // Pagination tests",
															"        pm.test(\"Pagination fields in meta data are present\", function () {",
															"            pm.expect(jsonData.meta.totalPages >= 0);",
															"            pm.expect(jsonData.meta.totalRecords >= 0);",
															"        });",
															"",
															"        var currentPage = pm.variables.get(\"currentPage\");",
															"        var currentPageSize = pm.variables.get(\"pageSize\");",
															"        var currentTotalPages = jsonData?.meta?.totalPages;",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;",
															"",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;",
															"",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"            pm.expect(jsonData.links).to.have.property(\"first\");",
															"            pm.expect(jsonData.links).to.have.property(\"last\");",
															"        });",
															"",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"            pm.expect(jsonData.links).to.have.property(\"next\");",
															"            pm.expect(jsonData.links).to.have.property(\"last\");",
															"        });",
															"",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"            pm.expect(jsonData.links).to.have.property(\"first\");",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");",
															"            pm.expect(jsonData.links).to.have.property(\"next\");",
															"            pm.expect(jsonData.links).to.have.property(\"last\");",
															"        });",
															"",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {",
															"            pm.expect(jsonData.links).to.have.property(\"self\");",
															"            pm.expect(jsonData.links).to.have.property(\"first\");",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");",
															"        });",
															"",
															"        // Schema payload check",
															"        pm.test('Response payload conforms to standards schema', function() {",
															"            const valid = ajv.validate(\"ResponseBankingAccountsBalanceList\", jsonData)",
															"            if (!valid){",
															"            ajv.errors.forEach(element => {",
															"                console.log(JSON.stringify(element));",
															"                });",
															"            };",
															"            pm.expect(valid).to.be.true; ",
															"        });      ",
															"} else {",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
															"}",
															"",
															"",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "c4a28abc-f682-4192-b188-bfd07a9f9437",
											"protocolProfileBehavior": {
												"disableBodyPruning": true
											},
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": ""
												},
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/balances",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														"balances"
													]
												}
											},
											"response": []
										},
										{
											"name": "Get Balances For Specific Accounts - First page",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
															"{",
															"        if (pm.variables.get(\"testAccountId1\") != \"\" || pm.variables.get(\"testAccountId2\") != \"\")",
															"        {",
															"                // Parse the response body",
															"                var jsonData;",
															"                try { jsonData = pm.response.json(); } catch(e) {}",
															"",
															"                // HTTP Response and headers",
															"                pm.test(\"Status code is 200\", function () {",
															"                    pm.response.to.have.status(200);",
															"                });",
															"",
															"                pm.test(\"Content-Type header specifies json\", function () {",
															"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
															"                });",
															"",
															"                pm.test(\"x-v header is present and has correct value\", function () {",
															"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));",
															"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
															"                    var checkValue = Math.min(requestXv, requestMinXv);",
															"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
															"                    pm.expect(responseXv).gte(checkValue);",
															"                });",
															"",
															"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
															"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
															"                });",
															"",
															"                // Pagination tests",
															"                pm.test(\"Pagination fields in meta data are present\", function () {",
															"                    pm.expect(jsonData.meta.totalPages >= 0);",
															"                    pm.expect(jsonData.meta.totalRecords >= 0);",
															"                });",
															"",
															"                var currentPage = pm.variables.get(\"currentPage\");",
															"                var currentPageSize = pm.variables.get(\"pageSize\");",
															"                var currentTotalPages = jsonData?.meta?.totalPages;",
															"                var currentTotalRecords = jsonData?.meta?.totalRecords;",
															"",
															"                // set the total records in a global variable to be accessible from other calla",
															"                pm.variables.set(\"totalBulkBalancePages\", currentTotalPages);",
															"                if (currentPageSize >=  currentTotalRecords) {",
															"                    postman.setNextRequest(\"Get Balances For Specific Accounts - Invalid account ID\");",
															"                }",
															"",
															"                var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;",
															"                var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;",
															"                var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;",
															"                var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;",
															"",
															"                ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");",
															"                });",
															"",
															"                ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");",
															"                });",
															"",
															"                ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");",
															"                });",
															"",
															"                ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");",
															"                });",
															"",
															"            // Schema payload check",
															"            pm.test('Response payload conforms to standards schema', function() {",
															"                const valid = ajv.validate(\"ResponseBankingAccountsBalanceList\", jsonData)",
															"                if (!valid){",
															"                ajv.errors.forEach(element => {",
															"                    console.log(JSON.stringify(element));",
															"                    });",
															"                };",
															"                pm.expect(valid).to.be.true; ",
															"            });   ",
															"        }   ",
															"} else {",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
															"}",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"currentPage\", 1);\r",
															"var pageSize = pm.variables.get(\"pageSizeBulkBalances\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "15b4988a-54c1-4fe4-9645-db6bb556c524",
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n    \"data\": {\n        \"accountIds\": [\n            \"{{testAccountId1}}\",\n            \"{{testAccountId2}}\"\n        ]\n    },\n    \"meta\": {}\n}"
												},
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/balances?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														"balances"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}"
														}
													]
												},
												"description": "Obtain balances for a specified list of accounts"
											},
											"response": []
										},
										{
											"name": "Get Balances For Specific Accounts - Other pages",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
															"{",
															"        if (pm.variables.get(\"testAccountId1\") != \"\" || pm.variables.get(\"testAccountId2\") != \"\")",
															"        {",
															"                // This will set the next request depending on if there are any pages left to be processed",
															"                const pageArray = pm.variables.get(\"pageArray\");",
															"                if (pageArray && pageArray.length > 0){",
															"                    postman.setNextRequest(\"Get Balances For Specific Accounts - Other pages\");",
															"                    } else {",
															"                        postman.setNextRequest(\"Get Balances For Specific Accounts - Invalid account ID\");       ",
															"                    }",
															"                // Parse the response body",
															"                var jsonData;",
															"                try { jsonData = pm.response.json(); } catch(e) {}",
															"",
															"                // HTTP Response and headers",
															"                pm.test(\"Status code is 200\", function () {",
															"                    pm.response.to.have.status(200);",
															"                });",
															"",
															"                pm.test(\"Content-Type header specifies json\", function () {",
															"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
															"                });",
															"",
															"                pm.test(\"x-v header is present and has correct value\", function () {",
															"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));",
															"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
															"                    var checkValue = Math.min(requestXv, requestMinXv);",
															"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
															"                    pm.expect(responseXv).gte(checkValue);",
															"                });",
															"",
															"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
															"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
															"                });",
															"",
															"",
															"                // Pagination tests",
															"                pm.test(\"Pagination fields in meta data are present\", function () {",
															"                    pm.expect(jsonData.meta.totalPages >= 0);",
															"                    pm.expect(jsonData.meta.totalRecords >= 0);",
															"                });",
															"",
															"                var currentPage = pm.variables.get(\"currentPage\");",
															"                var currentPageSize = pm.variables.get(\"pageSize\");",
															"                var currentTotalPages = jsonData?.meta?.totalPages;",
															"                var currentTotalRecords = jsonData?.meta?.totalRecords;",
															"",
															"                // set the total records in a global variable to be accessible from other calla",
															"                pm.variables.set(\"totalBulkBalancePages\", currentTotalPages);",
															"                if (currentPageSize >=  currentTotalRecords) {",
															"                    postman.setNextRequest(\"Get Balances For Specific Accounts - Invalid account ID\");",
															"                }",
															"",
															"                var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;",
															"                var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;",
															"                var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;",
															"                var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;",
															"",
															"                ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {",
															"                    pm.expect(jsonData?.links).to.have.property(\"self\");",
															"                });",
															"",
															"                ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");",
															"                });",
															"",
															"                ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");",
															"                });",
															"",
															"                ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");",
															"                });",
															"",
															"            // Schema payload check",
															"            pm.test('Response payload conforms to standards schema', function() {",
															"                const valid = ajv.validate(\"ResponseBankingAccountsBalanceList\", jsonData)",
															"                if (!valid){",
															"                ajv.errors.forEach(element => {",
															"                    console.log(JSON.stringify(element));",
															"                    });",
															"                };",
															"                pm.expect(valid).to.be.true; ",
															"            });   ",
															"        }",
															"",
															"} else {",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
															"}",
															"",
															"",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"var pageSize = pm.variables.get(\"pageSizeBulkBalances\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}\r",
															"\r",
															"var totalPages = pm.variables.get(\"totalBulkBalancePages\");\r",
															"var pageArray = pm.collectionVariables.get(\"pageArray\");\r",
															"\r",
															"if(!pageArray || pageArray.length == 0) {\r",
															"    for(var i = 1; i <= totalPages; i++)\r",
															"        pageArray.push(i);\r",
															"}\r",
															"\r",
															"let currentPage = pageArray.shift();\r",
															"if (currentPage == null) {pm.variables.set(\"currentPage\", 1)} else {\r",
															"    pm.variables.set(\"currentPage\", currentPage);\r",
															"}\r",
															"pm.collectionVariables.set(\"pageArray\", pageArray);"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "b2e46bbe-f66b-4fc2-a18a-982bee9ea9ad",
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n    \"data\": {\n        \"accountIds\": [\n            \"{{testAccountId1}}\",\n            \"{{testAccountId2}}\"\n        ]\n    },\n    \"meta\": {}\n}"
												},
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/balances?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														"balances"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													]
												}
											},
											"response": []
										},
										{
											"name": "Get Balances For Specific Accounts - Invalid account ID",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
															"{",
															"        // Parse the response body",
															"        try { jsonData = pm.response.json(); } catch(e) {}",
															"",
															"",
															"        // HTTP Response and headers",
															"        pm.test(\"Status code is 422\", function () {",
															"            pm.response.to.have.status(422);",
															"        });",
															"",
															"        pm.test(\"Content-Type header specifies json\", function () {",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
															"        });",
															"",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
															"        });",
															"",
															"        // Check the specific error response value",
															"        pm.test(\"Error list should contain correct information\", function () {",
															"            console.log(\"Returned data is \" + JSON.stringify(jsonData));",
															"            pm.expect(jsonData.errors[0].code).to.equal(\"urn:au-cds:error:cds-banking:Authorisation/UnavailableBankingAccount\")",
															"            pm.expect(jsonData.errors[0].title).to.equal(\"Unavailable Banking Account\");",
															"            pm.expect(jsonData.errors[0].detail).to.equal(pm.variables.get(\"invalidId\"));",
															"        });",
															"",
															"",
															"        // Schema payload check",
															"        pm.test('Response payload conforms to standards schema', function() {",
															"            const valid = ajv.validate(\"ResponseErrorListV2\", jsonData)",
															"            if (!valid){",
															"            ajv.errors.forEach(element => {",
															"                console.log(JSON.stringify(element));",
															"                });",
															"            };",
															"            pm.expect(valid).to.be.true; ",
															"        });     ",
															"} else {",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
															"}",
															"",
															"",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "a5e73607-90da-414a-87b3-101be2565704",
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n    \"data\": {\n        \"accountIds\": [\n            \"{{invalidId}}\"\n        ]\n    },\n    \"meta\": {}\n}"
												},
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/balances",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														"balances"
													]
												},
												"description": "Obtain balances for a specified list of accounts"
											},
											"response": []
										},
										{
											"name": "Get Balance For Account",
											"event": [
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
															"{",
															"        if (pm.variables.get(\"testAccountId1\") != \"\")",
															"        {",
															"                // Parse the response body",
															"                try { jsonData = pm.response.json(); } catch(e) {}",
															"",
															"",
															"                // HTTP Response and headers",
															"                pm.test(\"Status code is 200\", function () {",
															"                    pm.response.to.have.status(200);",
															"                });",
															"",
															"                pm.test(\"Content-Type header specifies json\", function () {",
															"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
															"                });",
															"",
															"                pm.test(\"x-v header is present and has correct value\", function () {",
															"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));",
															"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
															"                    var checkValue = Math.min(requestXv, requestMinXv);",
															"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
															"                    pm.expect(responseXv).gte(checkValue);",
															"                });",
															"",
															"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
															"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
															"                });",
															"",
															"                // Schema payload check",
															"                pm.test('Response payload conforms to standards schema', function() {",
															"                    const valid = ajv.validate(\"ResponseBankingAccountsBalanceById\", jsonData)",
															"                    if (!valid){",
															"                    ajv.errors.forEach(element => {",
															"                        console.log(JSON.stringify(element));",
															"                        });",
															"                    };",
															"                    pm.expect(valid).to.be.true; ",
															"                });  ",
															"             ",
															"        }",
															"",
															"} else {",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
															"}",
															"",
															"",
															"",
															"",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "24c300c6-3470-4bab-90a2-415bf9e06181",
											"protocolProfileBehavior": {
												"disableBodyPruning": true
											},
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": ""
												},
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/:accountId/balance",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														":accountId",
														"balance"
													],
													"variable": [
														{
															"key": "accountId",
															"value": "{{testAccountId1}}"
														}
													]
												}
											},
											"response": []
										}
									],
									"id": "7faac8b7-65b2-4180-90b2-204cb725d9e9"
								},
								{
									"name": "{account Id}",
									"item": [
										{
											"name": "transactions",
											"item": [
												{
													"name": "Get Transactions For Account - First page",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"",
																	"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
																	"{",
																	"        if (pm.variables.get(\"testAccountId1\") != \"\")",
																	"        {",
																	"                // Parse the response body",
																	"                var jsonData;",
																	"                try { jsonData = pm.response.json(); } catch(e) {}",
																	"",
																	"                // HTTP Response and headers",
																	"                pm.test(\"Status code is 200\", function () {",
																	"                    pm.response.to.have.status(200);",
																	"                });",
																	"",
																	"                pm.test(\"Content-Type header specifies json\", function () {",
																	"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
																	"                });",
																	"",
																	"                pm.test(\"x-v header is present and has correct value\", function () {",
																	"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));",
																	"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
																	"                    var checkValue = Math.min(requestXv, requestMinXv);",
																	"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
																	"                    pm.expect(responseXv).gte(checkValue);",
																	"                });",
																	"",
																	"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
																	"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
																	"                });",
																	"",
																	"                // Pagination tests",
																	"                pm.test(\"Pagination fields in meta data are present\", function () {",
																	"                    pm.expect(jsonData.meta.totalPages >= 0);",
																	"                    pm.expect(jsonData.meta.totalRecords >= 0);",
																	"                });",
																	"",
																	"                var currentPage = pm.variables.get(\"currentPage\");",
																	"                var currentPageSize = pm.variables.get(\"pageSize\");",
																	"                var currentTotalPages = jsonData?.meta?.totalPages;",
																	"                var currentTotalRecords = jsonData?.meta?.totalRecords;",
																	"",
																	"                // set the total records in a global variable to be accessible from other calls",
																	"                pm.variables.set(\"totalTransactionPages\", currentTotalPages);",
																	"                if (currentPageSize >=  currentTotalRecords) {",
																	"                    postman.setNextRequest(\"Get Transaction Detail\");",
																	"                }",
																	"",
																	"                var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;",
																	"                var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;",
																	"                var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;",
																	"                var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;",
																	"",
																	"                ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {",
																	"                    pm.expect(jsonData.links).to.have.property(\"self\");",
																	"                });",
																	"",
																	"                ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {",
																	"                    pm.expect(jsonData.links).to.have.property(\"self\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"next\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"last\");",
																	"                });",
																	"",
																	"                ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {",
																	"                    pm.expect(jsonData.links).to.have.property(\"self\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"first\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"prev\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"next\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"last\");",
																	"                });",
																	"",
																	"                ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {",
																	"                    pm.expect(jsonData.links).to.have.property(\"self\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"first\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"prev\");",
																	"                });",
																	"",
																	"                // Schema payload check",
																	"                pm.test('Response payload conforms to standards schema', function() {",
																	"                    const valid = ajv.validate(\"ResponseBankingTransactionList\", jsonData)",
																	"                    if (!valid){",
																	"                    ajv.errors.forEach(element => {",
																	"                        console.log(JSON.stringify(element));",
																	"                        });",
																	"                    };",
																	"                    pm.expect(valid).to.be.true; ",
																	"                }); ",
																	"",
																	"",
																	"        }    ",
																	"} else {",
																	"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
																	"}",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"pm.variables.set(\"currentPage\", 1);\r",
																	"var pageSize = pm.variables.get(\"pageSizeAccounts\");\r",
																	"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
																	"    pm.variables.set(\"pageSize\", pageSize);\r",
																	"}\r",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"id": "05784c25-4981-4bd2-9995-fd56370e419a",
													"request": {
														"method": "GET",
														"header": [
															{
																"key": "x-v",
																"value": "{{x-v}}",
																"type": "text"
															},
															{
																"key": "x-min-v",
																"value": "{{x-min-v}}",
																"type": "text"
															},
															{
																"key": "x-fapi-interaction-id",
																"value": "{{interactionId}}",
																"type": "text"
															},
															{
																"key": "x-fapi-auth-date",
																"value": "{{timeTenMinutesAgo}}",
																"type": "text"
															},
															{
																"key": "x-fapi-customer-ip-address",
																"value": "127.0.0.1",
																"type": "text"
															},
															{
																"key": "x-cds-client-headers",
																"value": "{{cdsClientHeader}}",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/json",
																"type": "text"
															}
														],
														"url": {
															"raw": "{{authenticatedResourceUrl}}/banking/accounts/:accountId/transactions?page={{currentPage}}&page-size={{pageSize}}",
															"host": [
																"{{authenticatedResourceUrl}}"
															],
															"path": [
																"banking",
																"accounts",
																":accountId",
																"transactions"
															],
															"query": [
																{
																	"key": "page",
																	"value": "{{currentPage}}",
																	"description": "Page of results to request (standard pagination)"
																},
																{
																	"key": "page-size",
																	"value": "{{pageSize}}",
																	"description": "Page size to request. Default is 25 (standard pagination)"
																}
															],
															"variable": [
																{
																	"key": "accountId",
																	"value": "{{testAccountId1}}",
																	"description": "ID of the account to get transactions for.  Must have previously been returned by one of the account list end points."
																}
															]
														},
														"description": "Obtain transactions for a specific account.\n\nSome general notes that apply to all end points that retrieve transactions:\n\n- Where multiple transactions are returned, transactions should be ordered according to effective date in descending order\n- As the date and time for a transaction can alter depending on status and transaction type two separate date/times are included in the payload. There are still some scenarios where neither of these time stamps is available. For the purpose of filtering and ordering it is expected that the data holder will use the “effective” date/time which will be defined as:\n\t\t- Posted date/time if available, then\n\t\t- Execution date/time if available, then\n\t\t- A reasonable date/time nominated by the data holder using internal data structures\n- For transaction amounts it should be assumed that a negative value indicates a reduction of the available balance on the account while a positive value indicates an increase in the available balance on the account"
													},
													"response": []
												},
												{
													"name": "Get Transactions For Account - Other pages",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
																	"{",
																	"        if (pm.variables.get(\"testAccountId1\") != \"\")",
																	"        {",
																	"                // This will set the next request depending on if there are any pages left to be processed",
																	"                const pageArray = pm.variables.get(\"pageArray\");",
																	"                if (pageArray && pageArray.length > 0){",
																	"                    postman.setNextRequest(\"Get Transactions For Account - Other pages\");",
																	"                    } else {",
																	"                        postman.setNextRequest(\"Get Transaction Detail\");       ",
																	"                    }",
																	"                // Parse the response body",
																	"                var jsonData;",
																	"                try { jsonData = pm.response.json(); } catch(e) {}",
																	"",
																	"",
																	"                // HTTP Response and headers",
																	"                pm.test(\"Status code is 200\", function () {",
																	"                    pm.response.to.have.status(200);",
																	"                });",
																	"",
																	"                pm.test(\"Content-Type header specifies json\", function () {",
																	"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
																	"                });",
																	"",
																	"                pm.test(\"x-v header is present and has correct value\", function () {",
																	"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));",
																	"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
																	"                    var checkValue = Math.min(requestXv, requestMinXv);",
																	"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
																	"                    pm.expect(responseXv).gte(checkValue);",
																	"                });",
																	"",
																	"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
																	"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
																	"                });",
																	"",
																	"",
																	"                // Pagination tests",
																	"                pm.test(\"Pagination fields in meta data are present\", function () {",
																	"                    pm.expect(jsonData.meta.totalPages >= 0);",
																	"                    pm.expect(jsonData.meta.totalRecords >= 0);",
																	"                });",
																	"",
																	"                var currentPage = pm.variables.get(\"currentPage\");",
																	"                var currentPageSize = pm.variables.get(\"pageSize\");",
																	"                var currentTotalPages = jsonData?.meta?.totalPages;",
																	"                var currentTotalRecords = jsonData?.meta?.totalRecords;",
																	"",
																	"                var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;",
																	"                var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;",
																	"                var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;",
																	"                var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;",
																	"",
																	"                ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {",
																	"                    pm.expect(jsonData.links).to.have.property(\"self\");",
																	"                    pm.expect(jsonData.links).to.not.have.property(\"next\");",
																	"                    pm.expect(jsonData.links).to.not.have.property(\"prev\");",
																	"                    pm.expect(jsonData.links).to.not.have.property(\"first\");",
																	"                    pm.expect(jsonData.links).to.not.have.property(\"last\");",
																	"                });",
																	"",
																	"                ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {",
																	"                    pm.expect(jsonData.links).to.have.property(\"self\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"next\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"last\");",
																	"                });",
																	"",
																	"                ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {",
																	"                    pm.expect(jsonData.links).to.have.property(\"self\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"first\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"prev\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"next\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"last\");",
																	"                });",
																	"",
																	"                ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {",
																	"                    pm.expect(jsonData.links).to.have.property(\"self\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"first\");",
																	"                    pm.expect(jsonData.links).to.have.property(\"prev\");",
																	"                });",
																	"",
																	"                // Schema payload check",
																	"                pm.test('Response payload conforms to standards schema', function() {",
																	"                    const valid = ajv.validate(\"ResponseBankingTransactionList\", jsonData)",
																	"                    if (!valid){",
																	"                    ajv.errors.forEach(element => {",
																	"                        console.log(JSON.stringify(element));",
																	"                        });",
																	"                    };",
																	"                    pm.expect(valid).to.be.true; ",
																	"                }); ",
																	"",
																	"        }    ",
																	"} else {",
																	"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
																	"}",
																	"",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														},
														{
															"listen": "prerequest",
															"script": {
																"exec": [
																	"\r",
																	"var pageSize = pm.variables.get(\"pageSizeTransactions\");\r",
																	"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
																	"    pm.variables.set(\"pageSize\", pageSize);\r",
																	"}\r",
																	"var totalPages = pm.variables.get(\"totalTransactionsPages\");\r",
																	"var pageArray = pm.variables.get(\"pageArray\");\r",
																	"\r",
																	"if(!pageArray || pageArray.length == 0) {\r",
																	"    for(var i = 1; i <= totalPages; i++)\r",
																	"        pageArray.push(i);\r",
																	"}\r",
																	"\r",
																	"\r",
																	"let currentPage = pageArray.shift();\r",
																	"if (currentPage == null) {pm.variables.set(\"currentPage\", 1)} else {\r",
																	"    pm.variables.set(\"currentPage\", currentPage);\r",
																	"}\r",
																	"pm.variables.set(\"pageArray\", pageArray);"
																],
																"type": "text/javascript"
															}
														}
													],
													"id": "18465ec3-8c3c-4b68-80d3-49e156262bf4",
													"request": {
														"method": "GET",
														"header": [
															{
																"key": "x-v",
																"value": "{{x-v}}",
																"type": "text"
															},
															{
																"key": "x-min-v",
																"value": "{{x-min-v}}",
																"type": "text"
															},
															{
																"key": "x-fapi-interaction-id",
																"value": "{{interactionId}}",
																"type": "text"
															},
															{
																"key": "x-fapi-auth-date",
																"value": "{{timeTenMinutesAgo}}",
																"type": "text"
															},
															{
																"key": "x-fapi-customer-ip-address",
																"value": "127.0.0.1",
																"type": "text"
															},
															{
																"key": "x-cds-client-headers",
																"value": "{{cdsClientHeader}}",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/json",
																"type": "text"
															}
														],
														"url": {
															"raw": "{{authenticatedResourceUrl}}/banking/accounts/:accountId/transactions?page={{currentPage}}&page-size={{pageSize}}",
															"host": [
																"{{authenticatedResourceUrl}}"
															],
															"path": [
																"banking",
																"accounts",
																":accountId",
																"transactions"
															],
															"query": [
																{
																	"key": "page",
																	"value": "{{currentPage}}"
																},
																{
																	"key": "page-size",
																	"value": "{{pageSize}}"
																}
															],
															"variable": [
																{
																	"key": "accountId",
																	"value": "{{testAccountId1}}",
																	"description": "ID of the account to get transactions for.  Must have previously been returned by one of the account list end points."
																}
															]
														},
														"description": "Obtain transactions for a specific account.\n\nSome general notes that apply to all end points that retrieve transactions:\n\n- Where multiple transactions are returned, transactions should be ordered according to effective date in descending order\n- As the date and time for a transaction can alter depending on status and transaction type two separate date/times are included in the payload. There are still some scenarios where neither of these time stamps is available. For the purpose of filtering and ordering it is expected that the data holder will use the “effective” date/time which will be defined as:\n\t\t- Posted date/time if available, then\n\t\t- Execution date/time if available, then\n\t\t- A reasonable date/time nominated by the data holder using internal data structures\n- For transaction amounts it should be assumed that a negative value indicates a reduction of the available balance on the account while a positive value indicates an increase in the available balance on the account"
													},
													"response": []
												},
												{
													"name": "Get Transaction Detail",
													"event": [
														{
															"listen": "test",
															"script": {
																"exec": [
																	"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true) {",
																	"    if (pm.variables.get(\"testTransactionId\") != \"\" || pm.variables.get(\"testAccountId1\") != \"\") {",
																	"        // Parse the response body",
																	"        try { jsonData = pm.response.json(); } catch (e) { }",
																	"",
																	"",
																	"        // HTTP Response and headers",
																	"        pm.test(\"Status code is 200\", function () {",
																	"            pm.response.to.have.status(200);",
																	"        });",
																	"",
																	"        pm.test(\"Content-Type header specifies json\", function () {",
																	"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
																	"        });",
																	"",
																	"        pm.test(\"x-v header is present and has correct value\", function () {",
																	"            var requestXv = parseInt(pm.variables.get(\"x-v\"));",
																	"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
																	"            var checkValue = Math.min(requestXv, requestMinXv);",
																	"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
																	"            pm.expect(responseXv).gte(checkValue);",
																	"        });",
																	"",
																	"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
																	"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
																	"        });",
																	"",
																	"",
																	"        // Schema payload check",
																	"        pm.test('Response payload conforms to standards schema', function () {",
																	"            const valid = ajv.validate(\"ResponseBankingTransactionById\", jsonData)",
																	"            if (!valid) {",
																	"                ajv.errors.forEach(element => {",
																	"                    console.log(JSON.stringify(element));",
																	"                });",
																	"            };",
																	"            pm.expect(valid).to.be.true;",
																	"        });",
																	"",
																	"    }",
																	"",
																	"} else {",
																	"    console.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
																	"}",
																	"",
																	"",
																	"",
																	"",
																	"",
																	"",
																	""
																],
																"type": "text/javascript"
															}
														}
													],
													"id": "b35fa966-9526-4e81-970a-eb9f5c3b9485",
													"request": {
														"method": "GET",
														"header": [
															{
																"key": "x-v",
																"value": "{{x-v}}",
																"type": "text"
															},
															{
																"key": "x-min-v",
																"value": "{{x-min-v}}",
																"type": "text"
															},
															{
																"key": "x-fapi-interaction-id",
																"value": "{{interactionId}}",
																"type": "text"
															},
															{
																"key": "x-fapi-auth-date",
																"value": "{{timeTenMinutesAgo}}",
																"type": "text"
															},
															{
																"key": "x-fapi-customer-ip-address",
																"value": "127.0.0.1",
																"type": "text"
															},
															{
																"key": "x-cds-client-headers",
																"value": "{{cdsClientHeader}}",
																"type": "text"
															},
															{
																"key": "Content-Type",
																"value": "application/json",
																"type": "text"
															}
														],
														"url": {
															"raw": "{{authenticatedResourceUrl}}/banking/accounts/:accountId/transactions/:transactionId",
															"host": [
																"{{authenticatedResourceUrl}}"
															],
															"path": [
																"banking",
																"accounts",
																":accountId",
																"transactions",
																":transactionId"
															],
															"variable": [
																{
																	"key": "accountId",
																	"value": "{{testTransactionAccountId}}"
																},
																{
																	"key": "transactionId",
																	"value": "{{testTransactionId}}"
																}
															]
														},
														"description": "Obtain detailed information on a transaction for a specific account"
													},
													"response": [
														{
															"id": "18e5e8b8-dfe0-4859-8503-0ebab43e8108",
															"name": "Success",
															"originalRequest": {
																"method": "GET",
																"header": [
																	{
																		"key": "x-v",
																		"value": "1",
																		"type": "text",
																		"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
																	},
																	{
																		"key": "x-fapi-interaction-id",
																		"value": "{{transactionId}}",
																		"type": "text",
																		"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
																	},
																	{
																		"key": "x-fapi-auth-date",
																		"value": "{{timeTenMinutesAgo}}",
																		"type": "text",
																		"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction."
																	},
																	{
																		"key": "x-fapi-customer-ip-address",
																		"value": "127.0.0.1",
																		"type": "text",
																		"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls."
																	},
																	{
																		"key": "x-cds-User-Agent",
																		"value": "aGVhZGVyOiB0ZXN0",
																		"type": "text",
																		"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls."
																	},
																	{
																		"key": "x-cds-subject",
																		"value": "{{cdsSubject}}",
																		"type": "text",
																		"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls."
																	},
																	{
																		"key": "Content-Type",
																		"value": "application/json",
																		"type": "text",
																		"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls."
																	}
																],
																"url": {
																	"raw": "{{baseUrl}}/banking/accounts/:accountId/transactions/:transactionId",
																	"host": [
																		"{{baseUrl}}"
																	],
																	"path": [
																		"banking",
																		"accounts",
																		":accountId",
																		"transactions",
																		":transactionId"
																	],
																	"variable": [
																		{
																			"key": "accountId",
																			"value": "{{testAccountId}}"
																		},
																		{
																			"key": "transactionId",
																			"value": "{{testTransactionId}}"
																		}
																	]
																}
															},
															"status": "OK",
															"code": 200,
															"_postman_previewlanguage": "json",
															"header": [
																{
																	"key": "x-v",
																	"value": "1",
																	"description": "The [version](#response-headers) of the API end point that the data holder has responded with."
																},
																{
																	"key": "x-fapi-interaction-id",
																	"value": "{{interactionId}}",
																	"description": "An RFC4122 UID used as a correlation id. The data holder must set the response header x-fapi-interaction-id to the value received from the corresponding fapi client request header or to a new RFC4122 UUID value if the request header was not provided to track the interaction."
																},
																{
																	"key": "Content-Type",
																	"value": "application/json"
																}
															],
															"cookie": [],
															"responseTime": null,
															"body": "{\n\t\"data\": {\n        \"accountId\": \"{{testAccountId}}\",\n        \"transactionId\": \"{{testTransactionId}}\",\n        \"isDetailAvailable\": true,\n        \"type\": \"OTHER\",\n        \"status\": \"POSTED\",\n        \"description\": \"string\",\n        \"postingDateTime\": \"2019-11-01T14:52:00.000Z\",\n        \"executionDateTime\": \"2019-10-29T12:51:00.000Z\",\n        \"amount\": \"-46.86\",\n        \"currency\": \"AUD\",\n        \"reference\": \"lorem ipsum\",\n        \"billerCode\": \"123456\",\n        \"billerName\": \"Fake Biller Co\",\n        \"crn\": \"17237769\",\n        \"apcaNumber\": \"123456\",\n\t\t\"extendedData\": {\n\t\t\t\"service\": \"X2P1.01\",\n\t\t\t\"payee\": \"payee@payee.com\",\n\t\t\t\"extensionUType\": \"x2p101Payload\",\n\t\t\t\"x2p101Payload\": {\n\t\t\t\t\"extendedDescription\": \"Description of payment\",\n\t\t\t\t\"endToEndId\": \"1234567890\"\n\t\t\t}\n\t\t}\n\t},\n\t\"links\": {\n\t    \"self\": \"https://data.holder.com.au/cds-au/v1/banking/accounts/{{testAccountId}}/transactions/{{testTransactionId}}\"\n\t},\n\t\"meta\": {}\n}"
														}
													]
												}
											],
											"id": "8695a454-f075-4d27-8cce-eb57a50f97ab"
										},
										{
											"name": "Get Direct Debits For Account - First page",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        if (pm.variables.get(\"testAccountId1\") != \"\")\r",
															"        {\r",
															"                // Parse the response body\r",
															"                var jsonData;\r",
															"                try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"\r",
															"                // HTTP Response and headers\r",
															"                pm.test(\"Status code is 200\", function () {\r",
															"                    pm.response.to.have.status(200);\r",
															"                });\r",
															"\r",
															"                pm.test(\"Content-Type header specifies json\", function () {\r",
															"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"                });\r",
															"\r",
															"                pm.test(\"x-v header is present and has correct value\", function () {\r",
															"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"                    var checkValue = Math.min(requestXv, requestMinXv);\r",
															"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"                    pm.expect(responseXv).gte(checkValue);\r",
															"                });\r",
															"\r",
															"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"                });\r",
															"\r",
															"                // Pagination tests\r",
															"                pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"                    pm.expect(jsonData.meta.totalPages >= 0);\r",
															"                    pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"                });\r",
															"\r",
															"                var currentPage = pm.variables.get(\"currentPage\");\r",
															"                var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"                var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"                var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"\r",
															"\r",
															"                // set the total records in a global variable to be accessible from other calla\r",
															"                pm.variables.set(\"totalDirectDebitPages\", currentTotalPages);\r",
															"                if (currentPageSize >=  currentTotalRecords) {\r",
															"                    postman.setNextRequest(\"Get Scheduled Payments for Account - First page\");\r",
															"                }\r",
															"\r",
															"                var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"                var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"                var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"                var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"                ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                });\r",
															"\r",
															"                ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"                });\r",
															"\r",
															"                ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"                });\r",
															"\r",
															"                ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"                });\r",
															"\r",
															"                // Schema payload check\r",
															"                pm.test('Response payload conforms to standards schema', function() {\r",
															"                    const valid = ajv.validate(\"ResponseBankingDirectDebitAuthorisationList\", jsonData)\r",
															"                    if (!valid){\r",
															"                    ajv.errors.forEach(element => {\r",
															"                        console.log(JSON.stringify(element));\r",
															"                        });\r",
															"                    };\r",
															"                    pm.expect(valid).to.be.true; \r",
															"                });  \r",
															"\r",
															"\r",
															"        }    \r",
															"} else {\r",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"currentPage\", 1);\r",
															"var pageSize = pm.variables.get(\"pageSizeAccounts\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "96ee0e75-7eb8-492a-a7f6-74dc75837506",
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/:accountId/direct-debits?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														":accountId",
														"direct-debits"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													],
													"variable": [
														{
															"key": "accountId",
															"value": "{{testAccountId1}}",
															"description": "ID of the account to get direct debit authorisations for.  Must have previously been returned by one of the account list end points."
														}
													]
												},
												"description": "Obtain direct debit authorisations for a specific account"
											},
											"response": [
												{
													"id": "4a752a66-9804-4aa5-a1da-e42f81c8c9c6",
													"name": "Success",
													"originalRequest": {
														"method": "GET",
														"header": [
															{
																"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)",
																"key": "x-v",
																"value": "<string>"
															},
															{
																"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable.",
																"key": "x-min-v",
																"value": "<string>"
															},
															{
																"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction.",
																"key": "x-fapi-interaction-id",
																"value": "<string>"
															},
															{
																"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls.",
																"key": "x-fapi-auth-date",
																"value": "<string>"
															},
															{
																"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls.",
																"key": "x-fapi-customer-ip-address",
																"value": "<string>"
															},
															{
																"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls.",
																"key": "x-cds-User-Agent",
																"value": "<string>"
															},
															{
																"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls.",
																"key": "x-cds-subject",
																"value": "<string>"
															}
														],
														"url": {
															"raw": "{{baseUrl}}/banking/accounts/<string>/direct-debits?page=1&page-size=25",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"banking",
																"accounts",
																"<string>",
																"direct-debits"
															],
															"query": [
																{
																	"key": "page",
																	"value": "1"
																},
																{
																	"key": "page-size",
																	"value": "25"
																}
															]
														}
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "x-v",
															"value": "<string>",
															"description": "The [version](#response-headers) of the API end point that the data holder has responded with."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "<string>",
															"description": "An RFC4122 UID used as a correlation id. The data holder must set the response header x-fapi-interaction-id to the value received from the corresponding fapi client request header or to a new RFC4122 UUID value if the request header was not provided to track the interaction."
														},
														{
															"key": "Content-Type",
															"value": "application/json"
														}
													],
													"cookie": [],
													"responseTime": null,
													"body": "{\n \"data\": {\n  \"directDebitAuthorisations\": [\n   {\n    \"accountId\": \"<string>\",\n    \"authorisedEntity\": {\n     \"description\": \"<string>\",\n     \"financialInstitution\": \"<string>\",\n     \"abn\": \"<string>\",\n     \"acn\": \"<string>\",\n     \"arbn\": \"<string>\"\n    },\n    \"lastDebitDateTime\": \"<string>\",\n    \"lastDebitAmount\": \"<string>\"\n   },\n   {\n    \"accountId\": \"<string>\",\n    \"authorisedEntity\": {\n     \"description\": \"<string>\",\n     \"financialInstitution\": \"<string>\",\n     \"abn\": \"<string>\",\n     \"acn\": \"<string>\",\n     \"arbn\": \"<string>\"\n    },\n    \"lastDebitDateTime\": \"<string>\",\n    \"lastDebitAmount\": \"<string>\"\n   }\n  ]\n },\n \"links\": {\n  \"self\": \"<string>\",\n  \"first\": \"<string>\",\n  \"prev\": \"<string>\",\n  \"next\": \"<string>\",\n  \"last\": \"<string>\"\n },\n \"meta\": {\n  \"totalPages\": \"<integer>\",\n  \"totalRecords\": \"<integer>\"\n }\n}"
												}
											]
										},
										{
											"name": "Get Direct Debits For Account - Other pages",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"\r",
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        if (pm.variables.get(\"testAccountId1\") != \"\")\r",
															"        {\r",
															"                // Parse the response body\r",
															"                var jsonData;\r",
															"                try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"\r",
															"                // HTTP Response and headers\r",
															"                pm.test(\"Status code is 200\", function () {\r",
															"                    pm.response.to.have.status(200);\r",
															"                });\r",
															"\r",
															"                pm.test(\"Content-Type header specifies json\", function () {\r",
															"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"                });\r",
															"\r",
															"                pm.test(\"x-v header is present and has correct value\", function () {\r",
															"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"                    var checkValue = Math.min(requestXv, requestMinXv);\r",
															"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"                    pm.expect(responseXv).gte(checkValue);\r",
															"                });\r",
															"\r",
															"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"                });\r",
															"\r",
															"                // Pagination tests\r",
															"                pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"                    pm.expect(jsonData.meta.totalPages >= 0);\r",
															"                    pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"                });\r",
															"\r",
															"                var currentPage = pm.variables.get(\"currentPage\");\r",
															"                var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"                var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"                var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"\r",
															"                // set the total records in a global variable to be accessible from other calla\r",
															"                pm.collectionVariables.set(\"totalDirectDebitPages\", currentTotalPages);\r",
															"                if (currentPageSize >=  currentTotalRecords) {\r",
															"                    postman.setNextRequest(\"Get Scheduled Payments for Account - First page\");\r",
															"                }\r",
															"\r",
															"                var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"                var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"                var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"                var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"                ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                });\r",
															"\r",
															"                ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"                });\r",
															"\r",
															"                ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"                });\r",
															"\r",
															"                ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"                });\r",
															"                // Schema payload check\r",
															"                pm.test('Response payload conforms to standards schema', function() {\r",
															"                    const valid = ajv.validate(\"ResponseBankingDirectDebitAuthorisationList\", jsonData)\r",
															"                    if (!valid){\r",
															"                    ajv.errors.forEach(element => {\r",
															"                        console.log(JSON.stringify(element));\r",
															"                        });\r",
															"                    };\r",
															"                    pm.expect(valid).to.be.true; \r",
															"                });  \r",
															"\r",
															"\r",
															"        }\r",
															"\r",
															"} else {\r",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															"\r",
															"\r",
															"\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"\r",
															"var pageSize = pm.variables.get(\"pageSizeBulkDirectDebits\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}\r",
															"var totalPages = pm.variables.get(\"totalDirectDebitPages\");\r",
															"var pageArray = pm.variables.get(\"pageArray\");\r",
															"\r",
															"if(!pageArray || pageArray.length == 0) {\r",
															"    pageArray = [];\r",
															"    for(var i = 1; i <= totalPages; i++)\r",
															"        pageArray.push(i);\r",
															"}\r",
															"\r",
															"\r",
															"let currentPage = pageArray.shift();\r",
															"if (currentPage == null) {pm.variables.set(\"currentPage\", 1)} else {\r",
															"    pm.variables.set(\"currentPage\", currentPage);\r",
															"};\r",
															"pm.variables.set(\"pageArray\", pageArray);"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "a5bbb848-8144-4236-a1dc-1264e8322b7e",
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/:accountId/direct-debits?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														":accountId",
														"direct-debits"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													],
													"variable": [
														{
															"key": "accountId",
															"value": "{{testAccountId1}}",
															"description": "ID of the account to get direct debit authorisations for.  Must have previously been returned by one of the account list end points."
														}
													]
												},
												"description": "Obtain direct debit authorisations for a specific account"
											},
											"response": [
												{
													"id": "3d514899-d6f5-4257-b058-d40b8d4f7104",
													"name": "Success",
													"originalRequest": {
														"method": "GET",
														"header": [
															{
																"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)",
																"key": "x-v",
																"value": "<string>"
															},
															{
																"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable.",
																"key": "x-min-v",
																"value": "<string>"
															},
															{
																"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction.",
																"key": "x-fapi-interaction-id",
																"value": "<string>"
															},
															{
																"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls.",
																"key": "x-fapi-auth-date",
																"value": "<string>"
															},
															{
																"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls.",
																"key": "x-fapi-customer-ip-address",
																"value": "<string>"
															},
															{
																"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls.",
																"key": "x-cds-User-Agent",
																"value": "<string>"
															},
															{
																"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls.",
																"key": "x-cds-subject",
																"value": "<string>"
															}
														],
														"url": {
															"raw": "{{baseUrl}}/banking/accounts/<string>/direct-debits?page=1&page-size=25",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"banking",
																"accounts",
																"<string>",
																"direct-debits"
															],
															"query": [
																{
																	"key": "page",
																	"value": "1"
																},
																{
																	"key": "page-size",
																	"value": "25"
																}
															]
														}
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "x-v",
															"value": "<string>",
															"description": "The [version](#response-headers) of the API end point that the data holder has responded with."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "<string>",
															"description": "An RFC4122 UID used as a correlation id. The data holder must set the response header x-fapi-interaction-id to the value received from the corresponding fapi client request header or to a new RFC4122 UUID value if the request header was not provided to track the interaction."
														},
														{
															"key": "Content-Type",
															"value": "application/json"
														}
													],
													"cookie": [],
													"responseTime": null,
													"body": "{\n \"data\": {\n  \"directDebitAuthorisations\": [\n   {\n    \"accountId\": \"<string>\",\n    \"authorisedEntity\": {\n     \"description\": \"<string>\",\n     \"financialInstitution\": \"<string>\",\n     \"abn\": \"<string>\",\n     \"acn\": \"<string>\",\n     \"arbn\": \"<string>\"\n    },\n    \"lastDebitDateTime\": \"<string>\",\n    \"lastDebitAmount\": \"<string>\"\n   },\n   {\n    \"accountId\": \"<string>\",\n    \"authorisedEntity\": {\n     \"description\": \"<string>\",\n     \"financialInstitution\": \"<string>\",\n     \"abn\": \"<string>\",\n     \"acn\": \"<string>\",\n     \"arbn\": \"<string>\"\n    },\n    \"lastDebitDateTime\": \"<string>\",\n    \"lastDebitAmount\": \"<string>\"\n   }\n  ]\n },\n \"links\": {\n  \"self\": \"<string>\",\n  \"first\": \"<string>\",\n  \"prev\": \"<string>\",\n  \"next\": \"<string>\",\n  \"last\": \"<string>\"\n },\n \"meta\": {\n  \"totalPages\": \"<integer>\",\n  \"totalRecords\": \"<integer>\"\n }\n}"
												}
											]
										},
										{
											"name": "Get Scheduled Payments for Account - First page",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"\r",
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        if (pm.variables.get(\"testAccountId1\") != \"\")\r",
															"        {\r",
															"                // Parse the response body\r",
															"                var jsonData;\r",
															"                try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"                // HTTP Response and headers\r",
															"                pm.test(\"Status code is 200\", function () {\r",
															"                    pm.response.to.have.status(200);\r",
															"                });\r",
															"\r",
															"                pm.test(\"Content-Type header specifies json\", function () {\r",
															"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"                });\r",
															"\r",
															"                pm.test(\"x-v header is present and has correct value\", function () {\r",
															"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"                    var checkValue = Math.min(requestXv, requestMinXv);\r",
															"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"                    pm.expect(responseXv).gte(checkValue);\r",
															"                });\r",
															"\r",
															"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"                });\r",
															"\r",
															"                // Pagination tests\r",
															"                pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"                    pm.expect(jsonData.meta.totalPages >= 0);\r",
															"                    pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"                });\r",
															"\r",
															"                var currentPage = pm.variables.get(\"currentPage\");\r",
															"                var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"                var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"                var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"\r",
															"                // set the total records in a global variable to be accessible from other calla\r",
															"                pm.variables.set(\"totalScheduledPaymentsPages\", currentTotalPages);\r",
															"                if (currentPageSize >=  currentTotalRecords) {\r",
															"                    postman.setNextRequest(\"Get Accounts - First page\");\r",
															"                }\r",
															"\r",
															"                var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"                var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"                var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"                var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"                ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                });\r",
															"\r",
															"                ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"                });\r",
															"\r",
															"                ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"                });\r",
															"\r",
															"                ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"                });\r",
															"\r",
															"                // Schema payload check\r",
															"                pm.test('Response payload conforms to standards schema', function() {\r",
															"                    const valid = ajv.validate(\"ResponseBankingScheduledPaymentsList\", jsonData)\r",
															"                    if (!valid){\r",
															"                    ajv.errors.forEach(element => {\r",
															"                        console.log(JSON.stringify(element));\r",
															"                        });\r",
															"                    };\r",
															"                    pm.expect(valid).to.be.true; \r",
															"                });  \r",
															"\r",
															"        }\r",
															"\r",
															"} else {\r",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"currentPage\", 1);\r",
															"var pageSize = pm.variables.get(\"pageSizeScheduledPayments\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "236a64ca-9009-4015-8e21-89e831621ff9",
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/:accountId/payments/scheduled?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														":accountId",
														"payments",
														"scheduled"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													],
													"variable": [
														{
															"key": "accountId",
															"value": "{{testAccountId1}}",
															"description": "ID of the account to get scheduled payments for. Must have previously been returned by one of the account list end points. The account specified is the source account for the payment"
														}
													]
												},
												"description": "Obtain scheduled, outgoing payments for a specific account"
											},
											"response": [
												{
													"id": "40573e90-8c7a-45d9-aa06-b2a223ea471c",
													"name": "Success",
													"originalRequest": {
														"method": "GET",
														"header": [
															{
																"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)",
																"key": "x-v",
																"value": "<string>"
															},
															{
																"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable.",
																"key": "x-min-v",
																"value": "<string>"
															},
															{
																"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction.",
																"key": "x-fapi-interaction-id",
																"value": "<string>"
															},
															{
																"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls.",
																"key": "x-fapi-auth-date",
																"value": "<string>"
															},
															{
																"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls.",
																"key": "x-fapi-customer-ip-address",
																"value": "<string>"
															},
															{
																"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls.",
																"key": "x-cds-User-Agent",
																"value": "<string>"
															},
															{
																"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls.",
																"key": "x-cds-subject",
																"value": "<string>"
															}
														],
														"url": {
															"raw": "{{baseUrl}}/banking/accounts/<string>/payments/scheduled?page=1&page-size=25",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"banking",
																"accounts",
																"<string>",
																"payments",
																"scheduled"
															],
															"query": [
																{
																	"key": "page",
																	"value": "1"
																},
																{
																	"key": "page-size",
																	"value": "25"
																}
															]
														}
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "x-v",
															"value": "<string>",
															"description": "The [version](#response-headers) of the API end point that the data holder has responded with."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "<string>",
															"description": "An RFC4122 UID used as a correlation id. The data holder must set the response header x-fapi-interaction-id to the value received from the corresponding fapi client request header or to a new RFC4122 UUID value if the request header was not provided to track the interaction."
														},
														{
															"key": "Content-Type",
															"value": "application/json"
														}
													],
													"cookie": [],
													"responseTime": null,
													"body": "{\n \"data\": {\n  \"scheduledPayments\": [\n   {\n    \"from\": {\n     \"accountId\": \"<string>\"\n    },\n    \"payeeReference\": \"<string>\",\n    \"payerReference\": \"<string>\",\n    \"paymentSet\": [\n     {\n      \"to\": {\n       \"toUType\": \"<string>\",\n       \"accountId\": \"<string>\",\n       \"payeeId\": \"<string>\",\n       \"domestic\": {\n        \"payeeAccountUType\": \"<string>\",\n        \"account\": {\n         \"accountName\": \"<string>\",\n         \"accountNumber\": \"<string>\",\n         \"bsb\": \"<string>\"\n        },\n        \"card\": {\n         \"cardNumber\": \"<string>\"\n        },\n        \"payId\": {\n         \"identifier\": \"<string>\",\n         \"type\": \"<string>\",\n         \"name\": \"<string>\"\n        }\n       },\n       \"biller\": {\n        \"billerCode\": \"<string>\",\n        \"billerName\": \"<string>\",\n        \"crn\": \"<string>\"\n       },\n       \"international\": {\n        \"bankDetails\": {\n         \"accountNumber\": \"<string>\",\n         \"country\": \"<string>\",\n         \"bankAddress\": {\n          \"address\": \"<string>\",\n          \"name\": \"<string>\"\n         },\n         \"beneficiaryBankBIC\": \"<string>\",\n         \"fedWireNumber\": \"<string>\",\n         \"sortCode\": \"<string>\",\n         \"chipNumber\": \"<string>\",\n         \"routingNumber\": \"<string>\",\n         \"legalEntityIdentifier\": \"<string>\"\n        },\n        \"beneficiaryDetails\": {\n         \"country\": \"<string>\",\n         \"name\": \"<string>\",\n         \"message\": \"<string>\"\n        }\n       }\n      },\n      \"isAmountCalculated\": \"<boolean>\",\n      \"amount\": \"<string>\",\n      \"currency\": \"<string>\"\n     },\n     {\n      \"to\": {\n       \"toUType\": \"<string>\",\n       \"accountId\": \"<string>\",\n       \"payeeId\": \"<string>\",\n       \"domestic\": {\n        \"payeeAccountUType\": \"<string>\",\n        \"account\": {\n         \"accountName\": \"<string>\",\n         \"accountNumber\": \"<string>\",\n         \"bsb\": \"<string>\"\n        },\n        \"card\": {\n         \"cardNumber\": \"<string>\"\n        },\n        \"payId\": {\n         \"identifier\": \"<string>\",\n         \"type\": \"<string>\",\n         \"name\": \"<string>\"\n        }\n       },\n       \"biller\": {\n        \"billerCode\": \"<string>\",\n        \"billerName\": \"<string>\",\n        \"crn\": \"<string>\"\n       },\n       \"international\": {\n        \"bankDetails\": {\n         \"accountNumber\": \"<string>\",\n         \"country\": \"<string>\",\n         \"bankAddress\": {\n          \"address\": \"<string>\",\n          \"name\": \"<string>\"\n         },\n         \"beneficiaryBankBIC\": \"<string>\",\n         \"fedWireNumber\": \"<string>\",\n         \"sortCode\": \"<string>\",\n         \"chipNumber\": \"<string>\",\n         \"routingNumber\": \"<string>\",\n         \"legalEntityIdentifier\": \"<string>\"\n        },\n        \"beneficiaryDetails\": {\n         \"country\": \"<string>\",\n         \"name\": \"<string>\",\n         \"message\": \"<string>\"\n        }\n       }\n      },\n      \"isAmountCalculated\": \"<boolean>\",\n      \"amount\": \"<string>\",\n      \"currency\": \"<string>\"\n     }\n    ],\n    \"recurrence\": {\n     \"recurrenceUType\": \"<string>\",\n     \"nextPaymentDate\": \"<string>\",\n     \"onceOff\": {\n      \"paymentDate\": \"<string>\"\n     },\n     \"intervalSchedule\": {\n      \"intervals\": [\n       {\n        \"interval\": \"<string>\",\n        \"dayInInterval\": \"<string>\"\n       },\n       {\n        \"interval\": \"<string>\",\n        \"dayInInterval\": \"<string>\"\n       }\n      ],\n      \"finalPaymentDate\": \"<string>\",\n      \"paymentsRemaining\": \"<integer>\",\n      \"nonBusinessDayTreatment\": \"ON\"\n     },\n     \"lastWeekDay\": {\n      \"interval\": \"<string>\",\n      \"lastWeekDay\": \"<integer>\",\n      \"finalPaymentDate\": \"<string>\",\n      \"paymentsRemaining\": \"<integer>\"\n     },\n     \"eventBased\": {\n      \"description\": \"<string>\"\n     }\n    },\n    \"scheduledPaymentId\": \"<string>\",\n    \"status\": \"<string>\",\n    \"nickname\": \"<string>\"\n   },\n   {\n    \"from\": {\n     \"accountId\": \"<string>\"\n    },\n    \"payeeReference\": \"<string>\",\n    \"payerReference\": \"<string>\",\n    \"paymentSet\": [\n     {\n      \"to\": {\n       \"toUType\": \"<string>\",\n       \"accountId\": \"<string>\",\n       \"payeeId\": \"<string>\",\n       \"domestic\": {\n        \"payeeAccountUType\": \"<string>\",\n        \"account\": {\n         \"accountName\": \"<string>\",\n         \"accountNumber\": \"<string>\",\n         \"bsb\": \"<string>\"\n        },\n        \"card\": {\n         \"cardNumber\": \"<string>\"\n        },\n        \"payId\": {\n         \"identifier\": \"<string>\",\n         \"type\": \"<string>\",\n         \"name\": \"<string>\"\n        }\n       },\n       \"biller\": {\n        \"billerCode\": \"<string>\",\n        \"billerName\": \"<string>\",\n        \"crn\": \"<string>\"\n       },\n       \"international\": {\n        \"bankDetails\": {\n         \"accountNumber\": \"<string>\",\n         \"country\": \"<string>\",\n         \"bankAddress\": {\n          \"address\": \"<string>\",\n          \"name\": \"<string>\"\n         },\n         \"beneficiaryBankBIC\": \"<string>\",\n         \"fedWireNumber\": \"<string>\",\n         \"sortCode\": \"<string>\",\n         \"chipNumber\": \"<string>\",\n         \"routingNumber\": \"<string>\",\n         \"legalEntityIdentifier\": \"<string>\"\n        },\n        \"beneficiaryDetails\": {\n         \"country\": \"<string>\",\n         \"name\": \"<string>\",\n         \"message\": \"<string>\"\n        }\n       }\n      },\n      \"isAmountCalculated\": \"<boolean>\",\n      \"amount\": \"<string>\",\n      \"currency\": \"<string>\"\n     },\n     {\n      \"to\": {\n       \"toUType\": \"<string>\",\n       \"accountId\": \"<string>\",\n       \"payeeId\": \"<string>\",\n       \"domestic\": {\n        \"payeeAccountUType\": \"<string>\",\n        \"account\": {\n         \"accountName\": \"<string>\",\n         \"accountNumber\": \"<string>\",\n         \"bsb\": \"<string>\"\n        },\n        \"card\": {\n         \"cardNumber\": \"<string>\"\n        },\n        \"payId\": {\n         \"identifier\": \"<string>\",\n         \"type\": \"<string>\",\n         \"name\": \"<string>\"\n        }\n       },\n       \"biller\": {\n        \"billerCode\": \"<string>\",\n        \"billerName\": \"<string>\",\n        \"crn\": \"<string>\"\n       },\n       \"international\": {\n        \"bankDetails\": {\n         \"accountNumber\": \"<string>\",\n         \"country\": \"<string>\",\n         \"bankAddress\": {\n          \"address\": \"<string>\",\n          \"name\": \"<string>\"\n         },\n         \"beneficiaryBankBIC\": \"<string>\",\n         \"fedWireNumber\": \"<string>\",\n         \"sortCode\": \"<string>\",\n         \"chipNumber\": \"<string>\",\n         \"routingNumber\": \"<string>\",\n         \"legalEntityIdentifier\": \"<string>\"\n        },\n        \"beneficiaryDetails\": {\n         \"country\": \"<string>\",\n         \"name\": \"<string>\",\n         \"message\": \"<string>\"\n        }\n       }\n      },\n      \"isAmountCalculated\": \"<boolean>\",\n      \"amount\": \"<string>\",\n      \"currency\": \"<string>\"\n     }\n    ],\n    \"recurrence\": {\n     \"recurrenceUType\": \"<string>\",\n     \"nextPaymentDate\": \"<string>\",\n     \"onceOff\": {\n      \"paymentDate\": \"<string>\"\n     },\n     \"intervalSchedule\": {\n      \"intervals\": [\n       {\n        \"interval\": \"<string>\",\n        \"dayInInterval\": \"<string>\"\n       },\n       {\n        \"interval\": \"<string>\",\n        \"dayInInterval\": \"<string>\"\n       }\n      ],\n      \"finalPaymentDate\": \"<string>\",\n      \"paymentsRemaining\": \"<integer>\",\n      \"nonBusinessDayTreatment\": \"ON\"\n     },\n     \"lastWeekDay\": {\n      \"interval\": \"<string>\",\n      \"lastWeekDay\": \"<integer>\",\n      \"finalPaymentDate\": \"<string>\",\n      \"paymentsRemaining\": \"<integer>\"\n     },\n     \"eventBased\": {\n      \"description\": \"<string>\"\n     }\n    },\n    \"scheduledPaymentId\": \"<string>\",\n    \"status\": \"<string>\",\n    \"nickname\": \"<string>\"\n   }\n  ]\n },\n \"links\": {\n  \"self\": \"<string>\",\n  \"first\": \"<string>\",\n  \"prev\": \"<string>\",\n  \"next\": \"<string>\",\n  \"last\": \"<string>\"\n },\n \"meta\": {\n  \"totalPages\": \"<integer>\",\n  \"totalRecords\": \"<integer>\"\n }\n}"
												}
											]
										},
										{
											"name": "Get Scheduled Payments for Account - Other pages",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        if (pm.variables.get(\"testAccountId1\") != \"\")\r",
															"        {\r",
															"                // Parse the response body\r",
															"                var jsonData;\r",
															"                try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"                // HTTP Response and headers\r",
															"                pm.test(\"Status code is 200\", function () {\r",
															"                    pm.response.to.have.status(200);\r",
															"                });\r",
															"\r",
															"                pm.test(\"Content-Type header specifies json\", function () {\r",
															"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"                });\r",
															"\r",
															"                pm.test(\"x-v header is present and has correct value\", function () {\r",
															"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"                    var checkValue = Math.min(requestXv, requestMinXv);\r",
															"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"                    pm.expect(responseXv).gte(checkValue);\r",
															"                });\r",
															"\r",
															"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"                });\r",
															"\r",
															"                // Pagination tests\r",
															"                pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"                    pm.expect(jsonData.meta.totalPages >= 0);\r",
															"                    pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"                });\r",
															"\r",
															"                var currentPage = pm.variables.get(\"currentPage\");\r",
															"                var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"                var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"                var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"\r",
															"                // set the total records in a global variable to be accessible from other calla\r",
															"                pm.collectionVariables.set(\"totalScheduledPaymentsPages\", currentTotalPages);\r",
															"                if (currentPageSize >=  currentTotalRecords) {\r",
															"                    postman.setNextRequest(\"Get Accounts - First page\");\r",
															"                }\r",
															"\r",
															"                var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"                var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"                var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"                var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"                ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                });\r",
															"\r",
															"                ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"                });\r",
															"\r",
															"                ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"                });\r",
															"\r",
															"                ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"                    pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"                    pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"                });\r",
															"                // Schema payload check\r",
															"                pm.test('Response payload conforms to standards schema', function() {\r",
															"                    const valid = ajv.validate(\"ResponseBankingScheduledPaymentsList\", jsonData)\r",
															"                    if (!valid){\r",
															"                    ajv.errors.forEach(element => {\r",
															"                        console.log(JSON.stringify(element));\r",
															"                        });\r",
															"                    };\r",
															"                    pm.expect(valid).to.be.true; \r",
															"                });  \r",
															"\r",
															"\r",
															"        }\r",
															"\r",
															"} else {\r",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"var pageSize = pm.variables.get(\"pageSizeScheduledPayments\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}\r",
															"var totalPages = pm.variables.get(\"totalScheduledPaymentsPages\");\r",
															"var pageArray = pm.variables.get(\"pageArray\");\r",
															"\r",
															"if(!pageArray || pageArray.length == 0) {\r",
															"    pageArray = [];\r",
															"    for(var i = 1; i <= totalPages; i++)\r",
															"        pageArray.push(i);\r",
															"}\r",
															"\r",
															"\r",
															"let currentPage = pageArray.shift();\r",
															"if (currentPage == null) {pm.variables.set(\"currentPage\", 1)} else {\r",
															"    pm.variables.set(\"currentPage\", currentPage);\r",
															"}\r",
															"pm.variables.set(\"pageArray\", pageArray);\r",
															""
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "4a0d5310-490d-4c27-af8c-31576f00fe49",
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/accounts/:accountId/payments/scheduled?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"accounts",
														":accountId",
														"payments",
														"scheduled"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													],
													"variable": [
														{
															"key": "accountId",
															"value": "{{testAccountId1}}",
															"description": "ID of the account to get scheduled payments for. Must have previously been returned by one of the account list end points. The account specified is the source account for the payment"
														}
													]
												},
												"description": "Obtain scheduled, outgoing payments for a specific account"
											},
											"response": [
												{
													"id": "8b277fa7-a389-43ec-95a1-343dc4b6ace8",
													"name": "Success",
													"originalRequest": {
														"method": "GET",
														"header": [
															{
																"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)",
																"key": "x-v",
																"value": "<string>"
															},
															{
																"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable.",
																"key": "x-min-v",
																"value": "<string>"
															},
															{
																"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction.",
																"key": "x-fapi-interaction-id",
																"value": "<string>"
															},
															{
																"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls.",
																"key": "x-fapi-auth-date",
																"value": "<string>"
															},
															{
																"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls.",
																"key": "x-fapi-customer-ip-address",
																"value": "<string>"
															},
															{
																"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls.",
																"key": "x-cds-User-Agent",
																"value": "<string>"
															},
															{
																"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls.",
																"key": "x-cds-subject",
																"value": "<string>"
															}
														],
														"url": {
															"raw": "{{baseUrl}}/banking/accounts/<string>/payments/scheduled?page=1&page-size=25",
															"host": [
																"{{baseUrl}}"
															],
															"path": [
																"banking",
																"accounts",
																"<string>",
																"payments",
																"scheduled"
															],
															"query": [
																{
																	"key": "page",
																	"value": "1"
																},
																{
																	"key": "page-size",
																	"value": "25"
																}
															]
														}
													},
													"status": "OK",
													"code": 200,
													"_postman_previewlanguage": "json",
													"header": [
														{
															"key": "x-v",
															"value": "<string>",
															"description": "The [version](#response-headers) of the API end point that the data holder has responded with."
														},
														{
															"key": "x-fapi-interaction-id",
															"value": "<string>",
															"description": "An RFC4122 UID used as a correlation id. The data holder must set the response header x-fapi-interaction-id to the value received from the corresponding fapi client request header or to a new RFC4122 UUID value if the request header was not provided to track the interaction."
														},
														{
															"key": "Content-Type",
															"value": "application/json"
														}
													],
													"cookie": [],
													"responseTime": null,
													"body": "{\n \"data\": {\n  \"scheduledPayments\": [\n   {\n    \"from\": {\n     \"accountId\": \"<string>\"\n    },\n    \"payeeReference\": \"<string>\",\n    \"payerReference\": \"<string>\",\n    \"paymentSet\": [\n     {\n      \"to\": {\n       \"toUType\": \"<string>\",\n       \"accountId\": \"<string>\",\n       \"payeeId\": \"<string>\",\n       \"domestic\": {\n        \"payeeAccountUType\": \"<string>\",\n        \"account\": {\n         \"accountName\": \"<string>\",\n         \"accountNumber\": \"<string>\",\n         \"bsb\": \"<string>\"\n        },\n        \"card\": {\n         \"cardNumber\": \"<string>\"\n        },\n        \"payId\": {\n         \"identifier\": \"<string>\",\n         \"type\": \"<string>\",\n         \"name\": \"<string>\"\n        }\n       },\n       \"biller\": {\n        \"billerCode\": \"<string>\",\n        \"billerName\": \"<string>\",\n        \"crn\": \"<string>\"\n       },\n       \"international\": {\n        \"bankDetails\": {\n         \"accountNumber\": \"<string>\",\n         \"country\": \"<string>\",\n         \"bankAddress\": {\n          \"address\": \"<string>\",\n          \"name\": \"<string>\"\n         },\n         \"beneficiaryBankBIC\": \"<string>\",\n         \"fedWireNumber\": \"<string>\",\n         \"sortCode\": \"<string>\",\n         \"chipNumber\": \"<string>\",\n         \"routingNumber\": \"<string>\",\n         \"legalEntityIdentifier\": \"<string>\"\n        },\n        \"beneficiaryDetails\": {\n         \"country\": \"<string>\",\n         \"name\": \"<string>\",\n         \"message\": \"<string>\"\n        }\n       }\n      },\n      \"isAmountCalculated\": \"<boolean>\",\n      \"amount\": \"<string>\",\n      \"currency\": \"<string>\"\n     },\n     {\n      \"to\": {\n       \"toUType\": \"<string>\",\n       \"accountId\": \"<string>\",\n       \"payeeId\": \"<string>\",\n       \"domestic\": {\n        \"payeeAccountUType\": \"<string>\",\n        \"account\": {\n         \"accountName\": \"<string>\",\n         \"accountNumber\": \"<string>\",\n         \"bsb\": \"<string>\"\n        },\n        \"card\": {\n         \"cardNumber\": \"<string>\"\n        },\n        \"payId\": {\n         \"identifier\": \"<string>\",\n         \"type\": \"<string>\",\n         \"name\": \"<string>\"\n        }\n       },\n       \"biller\": {\n        \"billerCode\": \"<string>\",\n        \"billerName\": \"<string>\",\n        \"crn\": \"<string>\"\n       },\n       \"international\": {\n        \"bankDetails\": {\n         \"accountNumber\": \"<string>\",\n         \"country\": \"<string>\",\n         \"bankAddress\": {\n          \"address\": \"<string>\",\n          \"name\": \"<string>\"\n         },\n         \"beneficiaryBankBIC\": \"<string>\",\n         \"fedWireNumber\": \"<string>\",\n         \"sortCode\": \"<string>\",\n         \"chipNumber\": \"<string>\",\n         \"routingNumber\": \"<string>\",\n         \"legalEntityIdentifier\": \"<string>\"\n        },\n        \"beneficiaryDetails\": {\n         \"country\": \"<string>\",\n         \"name\": \"<string>\",\n         \"message\": \"<string>\"\n        }\n       }\n      },\n      \"isAmountCalculated\": \"<boolean>\",\n      \"amount\": \"<string>\",\n      \"currency\": \"<string>\"\n     }\n    ],\n    \"recurrence\": {\n     \"recurrenceUType\": \"<string>\",\n     \"nextPaymentDate\": \"<string>\",\n     \"onceOff\": {\n      \"paymentDate\": \"<string>\"\n     },\n     \"intervalSchedule\": {\n      \"intervals\": [\n       {\n        \"interval\": \"<string>\",\n        \"dayInInterval\": \"<string>\"\n       },\n       {\n        \"interval\": \"<string>\",\n        \"dayInInterval\": \"<string>\"\n       }\n      ],\n      \"finalPaymentDate\": \"<string>\",\n      \"paymentsRemaining\": \"<integer>\",\n      \"nonBusinessDayTreatment\": \"ON\"\n     },\n     \"lastWeekDay\": {\n      \"interval\": \"<string>\",\n      \"lastWeekDay\": \"<integer>\",\n      \"finalPaymentDate\": \"<string>\",\n      \"paymentsRemaining\": \"<integer>\"\n     },\n     \"eventBased\": {\n      \"description\": \"<string>\"\n     }\n    },\n    \"scheduledPaymentId\": \"<string>\",\n    \"status\": \"<string>\",\n    \"nickname\": \"<string>\"\n   },\n   {\n    \"from\": {\n     \"accountId\": \"<string>\"\n    },\n    \"payeeReference\": \"<string>\",\n    \"payerReference\": \"<string>\",\n    \"paymentSet\": [\n     {\n      \"to\": {\n       \"toUType\": \"<string>\",\n       \"accountId\": \"<string>\",\n       \"payeeId\": \"<string>\",\n       \"domestic\": {\n        \"payeeAccountUType\": \"<string>\",\n        \"account\": {\n         \"accountName\": \"<string>\",\n         \"accountNumber\": \"<string>\",\n         \"bsb\": \"<string>\"\n        },\n        \"card\": {\n         \"cardNumber\": \"<string>\"\n        },\n        \"payId\": {\n         \"identifier\": \"<string>\",\n         \"type\": \"<string>\",\n         \"name\": \"<string>\"\n        }\n       },\n       \"biller\": {\n        \"billerCode\": \"<string>\",\n        \"billerName\": \"<string>\",\n        \"crn\": \"<string>\"\n       },\n       \"international\": {\n        \"bankDetails\": {\n         \"accountNumber\": \"<string>\",\n         \"country\": \"<string>\",\n         \"bankAddress\": {\n          \"address\": \"<string>\",\n          \"name\": \"<string>\"\n         },\n         \"beneficiaryBankBIC\": \"<string>\",\n         \"fedWireNumber\": \"<string>\",\n         \"sortCode\": \"<string>\",\n         \"chipNumber\": \"<string>\",\n         \"routingNumber\": \"<string>\",\n         \"legalEntityIdentifier\": \"<string>\"\n        },\n        \"beneficiaryDetails\": {\n         \"country\": \"<string>\",\n         \"name\": \"<string>\",\n         \"message\": \"<string>\"\n        }\n       }\n      },\n      \"isAmountCalculated\": \"<boolean>\",\n      \"amount\": \"<string>\",\n      \"currency\": \"<string>\"\n     },\n     {\n      \"to\": {\n       \"toUType\": \"<string>\",\n       \"accountId\": \"<string>\",\n       \"payeeId\": \"<string>\",\n       \"domestic\": {\n        \"payeeAccountUType\": \"<string>\",\n        \"account\": {\n         \"accountName\": \"<string>\",\n         \"accountNumber\": \"<string>\",\n         \"bsb\": \"<string>\"\n        },\n        \"card\": {\n         \"cardNumber\": \"<string>\"\n        },\n        \"payId\": {\n         \"identifier\": \"<string>\",\n         \"type\": \"<string>\",\n         \"name\": \"<string>\"\n        }\n       },\n       \"biller\": {\n        \"billerCode\": \"<string>\",\n        \"billerName\": \"<string>\",\n        \"crn\": \"<string>\"\n       },\n       \"international\": {\n        \"bankDetails\": {\n         \"accountNumber\": \"<string>\",\n         \"country\": \"<string>\",\n         \"bankAddress\": {\n          \"address\": \"<string>\",\n          \"name\": \"<string>\"\n         },\n         \"beneficiaryBankBIC\": \"<string>\",\n         \"fedWireNumber\": \"<string>\",\n         \"sortCode\": \"<string>\",\n         \"chipNumber\": \"<string>\",\n         \"routingNumber\": \"<string>\",\n         \"legalEntityIdentifier\": \"<string>\"\n        },\n        \"beneficiaryDetails\": {\n         \"country\": \"<string>\",\n         \"name\": \"<string>\",\n         \"message\": \"<string>\"\n        }\n       }\n      },\n      \"isAmountCalculated\": \"<boolean>\",\n      \"amount\": \"<string>\",\n      \"currency\": \"<string>\"\n     }\n    ],\n    \"recurrence\": {\n     \"recurrenceUType\": \"<string>\",\n     \"nextPaymentDate\": \"<string>\",\n     \"onceOff\": {\n      \"paymentDate\": \"<string>\"\n     },\n     \"intervalSchedule\": {\n      \"intervals\": [\n       {\n        \"interval\": \"<string>\",\n        \"dayInInterval\": \"<string>\"\n       },\n       {\n        \"interval\": \"<string>\",\n        \"dayInInterval\": \"<string>\"\n       }\n      ],\n      \"finalPaymentDate\": \"<string>\",\n      \"paymentsRemaining\": \"<integer>\",\n      \"nonBusinessDayTreatment\": \"ON\"\n     },\n     \"lastWeekDay\": {\n      \"interval\": \"<string>\",\n      \"lastWeekDay\": \"<integer>\",\n      \"finalPaymentDate\": \"<string>\",\n      \"paymentsRemaining\": \"<integer>\"\n     },\n     \"eventBased\": {\n      \"description\": \"<string>\"\n     }\n    },\n    \"scheduledPaymentId\": \"<string>\",\n    \"status\": \"<string>\",\n    \"nickname\": \"<string>\"\n   }\n  ]\n },\n \"links\": {\n  \"self\": \"<string>\",\n  \"first\": \"<string>\",\n  \"prev\": \"<string>\",\n  \"next\": \"<string>\",\n  \"last\": \"<string>\"\n },\n \"meta\": {\n  \"totalPages\": \"<integer>\",\n  \"totalRecords\": \"<integer>\"\n }\n}"
												}
											]
										}
									],
									"id": "474f5493-1840-4fe2-be9a-f0777915b795"
								},
								{
									"name": "Get Accounts - First page",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "dd51e1f8-1ada-4b77-a2be-41963bb437cf",
												"exec": [
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
													"{",
													"        // Parse the response body",
													"        var jsonData;",
													"        try { jsonData = pm.response.json(); } catch(e) {}",
													"",
													"        // HTTP Response and headers",
													"        pm.test(\"Status code MUST be 200\", function () {",
													"            pm.response.to.have.status(200);",
													"        });",
													"",
													"        pm.test(\"Content-Type header specifies json\", function () {",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
													"        });",
													"",
													"        pm.test(\"x-v header is present and has correct value\", function () {",
													"            var requestXv = parseInt(pm.variables.get(\"x-v\"));",
													"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
													"            var checkValue = Math.min(requestXv, requestMinXv);",
													"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
													"            pm.expect(responseXv).gte(checkValue);",
													"        });",
													"",
													"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
													"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
													"        });",
													"",
													"",
													"        // Pagination tests",
													"        pm.test(\"Pagination fields in meta data are present\", function () {",
													"            pm.expect(jsonData.meta.totalPages >= 0);",
													"            pm.expect(jsonData.meta.totalRecords >= 0);",
													"        });",
													"        var currentPage = pm.variables.get(\"currentPage\");",
													"        var currentPageSize = pm.variables.get(\"pageSize\");",
													"        var currentTotalPages = jsonData?.meta?.totalPages;",
													"        var currentTotalRecords = jsonData?.meta?.totalRecords;",
													"",
													"        // need to store the number of pages so it is acccessible for subsequent requests",
													"        pm.variables.set(\"totalAccountsPages\", currentTotalPages);",
													"        if (currentTotalPages == 1) {",
													"            postman.setNextRequest(\"Get Account Detail\");   ",
													"        }",
													"",
													"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;",
													"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;",
													"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;",
													"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;",
													"",
													"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {",
													"            pm.expect(jsonData.links).to.have.property(\"self\");",
													"        });",
													"",
													"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {",
													"            pm.expect(jsonData.links).to.have.property(\"self\");",
													"            pm.expect(jsonData.links).to.have.property(\"next\");",
													"            pm.expect(jsonData.links).to.have.property(\"last\");",
													"        });",
													"",
													"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {",
													"            pm.expect(jsonData.links).to.have.property(\"self\");",
													"            pm.expect(jsonData.links).to.have.property(\"first\");",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");",
													"            pm.expect(jsonData.links).to.have.property(\"next\");",
													"            pm.expect(jsonData.links).to.have.property(\"last\");",
													"        });",
													"",
													"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {",
													"            pm.expect(jsonData.links).to.have.property(\"self\");",
													"            pm.expect(jsonData.links).to.have.property(\"first\");",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");",
													"        });",
													"",
													"",
													"        // Schema payload check",
													"        pm.test('Response payload conforms to standards schema', function() {",
													"            const valid = ajv.validate(\"ResponseBankingAccountList\", jsonData)",
													"            if (!valid){",
													"            ajv.errors.forEach(element => {",
													"                console.log(JSON.stringify(element));",
													"                });",
													"            };",
													"            pm.expect(valid).to.be.true; ",
													"        });           ",
													"} else {",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
													"}",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "9d31ae60-ecda-4b59-8bc7-0255416879bf",
												"exec": [
													"// First page is always 1\r",
													"pm.variables.set(\"currentPage\", 1);\r",
													"// if a page size is specified use it, otherwise default\r",
													"var pageSize = pm.variables.get(\"pageSizeAccounts\");\r",
													"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
													"    pm.variables.set(\"pageSize\", pageSize);\r",
													"}"
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "448aaa65-2422-48be-9211-6926e963e54a",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text"
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text"
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text"
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{authenticatedResourceUrl}}/banking/accounts?open-status=ALL&page={{currentPage}}&page-size={{pageSize}}",
											"host": [
												"{{authenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"accounts"
											],
											"query": [
												{
													"key": "open-status",
													"value": "ALL",
													"description": "Used to filter results according to open/closed status. Values can be OPEN, CLOSED or ALL. If absent then ALL is assumed"
												},
												{
													"key": "page",
													"value": "{{currentPage}}",
													"description": "Page of results to request (standard pagination)"
												},
												{
													"key": "page-size",
													"value": "{{pageSize}}",
													"description": "Page size to request. Default is 25 (standard pagination)"
												}
											]
										},
										"description": "Obtain a list of accounts"
									},
									"response": []
								},
								{
									"name": "Get Accounts - Other pages",
									"event": [
										{
											"listen": "test",
											"script": {
												"id": "7098653a-0e7f-4278-adad-545cc5e74dad",
												"exec": [
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
													"{",
													"        // Determine if this is the last time this request is run by looking at the pageArray",
													"        const pageArray = pm.variables.get(\"pageArray\");",
													"        if (pageArray && pageArray.length > 0){",
													"            postman.setNextRequest(\"Get Accounts - Other pages\");",
													"            } else {",
													"                postman.setNextRequest(\"Get Account Detail\");       ",
													"            }",
													"",
													"        // Parse the response body",
													"        var jsonData;",
													"        try { jsonData = pm.response.json(); } catch(e) {}",
													"",
													"",
													"        // HTTP Response and headers",
													"        pm.test(\"Status code MUST be 200\", function () {",
													"            pm.response.to.have.status(200);",
													"        });",
													"",
													"        pm.test(\"Content-Type header specifies json\", function () {",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
													"        });",
													"",
													"        pm.test(\"x-v header is present and has correct value\", function () {",
													"            var requestXv = parseInt(pm.variables.get(\"x-v\"));",
													"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
													"            var checkValue = Math.min(requestXv, requestMinXv);",
													"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
													"            pm.expect(responseXv).gte(checkValue);",
													"        });",
													"",
													"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
													"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
													"        });",
													"",
													"",
													"        // Pagination tests",
													"        pm.test(\"Pagination fields in meta data are present\", function () {",
													"            pm.expect(jsonData.meta.totalPages >= 0);",
													"            pm.expect(jsonData.meta.totalRecords >= 0);",
													"        });",
													"",
													"        var currentPage = pm.variables.get(\"currentPage\");",
													"        var currentPageSize = pm.variables.get(\"pageSize\");",
													"        var currentTotalPages = jsonData?.meta?.totalPages;",
													"        var currentTotalRecords = jsonData?.meta?.totalRecords;",
													"",
													"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;",
													"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;",
													"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;",
													"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;",
													"",
													"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {",
													"            pm.expect(jsonData.links).to.have.property(\"self\");",
													"        });",
													"",
													"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {",
													"            pm.expect(jsonData.links).to.have.property(\"self\");",
													"            pm.expect(jsonData.links).to.have.property(\"next\");",
													"            pm.expect(jsonData.links).to.have.property(\"last\");",
													"        });",
													"",
													"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {",
													"            pm.expect(jsonData.links).to.have.property(\"self\");",
													"            pm.expect(jsonData.links).to.have.property(\"first\");",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");",
													"            pm.expect(jsonData.links).to.have.property(\"next\");",
													"            pm.expect(jsonData.links).to.have.property(\"last\");",
													"        });",
													"",
													"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {",
													"            pm.expect(jsonData.links).to.have.property(\"self\");",
													"            pm.expect(jsonData.links).to.have.property(\"first\");",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");",
													"        });",
													"",
													"",
													"        // Schema payload check",
													"        pm.test('Response payload conforms to standards schema', function() {",
													"            const valid = ajv.validate(\"ResponseBankingAccountList\", jsonData)",
													"            if (!valid){",
													"            ajv.errors.forEach(element => {",
													"                console.log(JSON.stringify(element));",
													"                });",
													"            };",
													"            pm.expect(valid).to.be.true; ",
													"        });",
													"} else {",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
													"}",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"id": "4ebbf969-39bc-40ea-a46e-1417d4156fc8",
												"exec": [
													"var pageSize = pm.variables.get(\"pageSizeAccounts\");\r",
													"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
													"    pm.variables.set(\"pageSize\", pageSize);\r",
													"}\r",
													"\r",
													"// The totalAccountsPages is set in the previous \"******** - First page\" request\r",
													"var totalPages = pm.variables.get(\"totalAccountsPages\");\r",
													"// pageArray is an array of consequtive numbers\r",
													"var pageArray = pm.variables.get(\"pageArray\");\r",
													"\r",
													"if(!pageArray || pageArray.length == 0) {\r",
													"    for(var i = 1; i <= totalPages; i++)\r",
													"        pageArray.push(i);\r",
													"}\r",
													"\r",
													"let currentPage = pageArray.shift();\r",
													"if (currentPage == null) {pm.variables.set(\"currentPage\", 1)} else {\r",
													"    pm.variables.set(\"currentPage\", currentPage);\r",
													"}\r",
													"pm.variables.set(\"pageArray\", pageArray);\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "22b0daae-36ac-4ff2-b38a-05fed3d2dde7",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text"
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text"
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text"
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{authenticatedResourceUrl}}/banking/accounts?open-status=ALL&page={{currentPage}}&page-size={{pageSize}}",
											"host": [
												"{{authenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"accounts"
											],
											"query": [
												{
													"key": "open-status",
													"value": "ALL",
													"description": "Used to filter results according to open/closed status. Values can be OPEN, CLOSED or ALL. If absent then ALL is assumed"
												},
												{
													"key": "page",
													"value": "{{currentPage}}",
													"description": "Page of results to request (standard pagination)"
												},
												{
													"key": "page-size",
													"value": "{{pageSize}}",
													"description": "Page size to request. Default is 25 (standard pagination)"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Account Detail",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
													"{",
													"        // if not id is provided we skip these tests",
													"        if (pm.variables.get(\"testAccountId1\") != \"\")",
													"        {",
													"                // Parse the response body",
													"                var jsonData;",
													"                try { jsonData = pm.response.json(); } catch(e) {}",
													"",
													"                // HTTP Response and headers",
													"                pm.test(\"Status code is 200\", function () {",
													"                    pm.response.to.have.status(200);",
													"                });",
													"",
													"                pm.test(\"Content-Type header specifies json\", function () {",
													"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
													"                });",
													"",
													"                pm.test(\"x-v header is present and has correct value\", function () {",
													"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));",
													"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
													"                    var checkValue = Math.min(requestXv, requestMinXv);",
													"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
													"                    pm.expect(responseXv).gte(checkValue);",
													"                });",
													"",
													"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
													"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
													"                });",
													"",
													"",
													"        // Schema payload check",
													"        pm.test('Response payload conforms to standards schema', function() {",
													"            const valid = ajv.validate(\"ResponseBankingAccountByIdV2\", jsonData)",
													"            if (!valid){",
													"            ajv.errors.forEach(element => {",
													"                console.log(JSON.stringify(element));",
													"                });",
													"            };",
													"            pm.expect(valid).to.be.true; ",
													"        });",
													"    }",
													"",
													"} else {",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
													"}",
													"",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "3fd60b81-07c3-41e8-bf7b-13b2533515b8",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text",
												"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction."
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text",
												"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls."
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text",
												"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls."
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text",
												"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text",
												"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls."
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{authenticatedResourceUrl}}/banking/accounts/:accountId",
											"host": [
												"{{authenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"accounts",
												":accountId"
											],
											"variable": [
												{
													"key": "accountId",
													"value": "{{testAccountId1}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Account Detail - Invalid Account",
									"event": [
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
													"{",
													"        // Parse the response body",
													"        var jsonData;",
													"        try { jsonData = pm.response.json(); } catch(e) {}",
													"",
													"        // HTTP Response and headers",
													"        pm.test(\"Status code is 404\", function () {",
													"            pm.response.to.have.status(404);",
													"        });",
													"",
													"        pm.test(\"Content-Type header specifies json\", function () {",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
													"        });",
													"",
													"        pm.test(\"x-v header is present is integer\", function () {",
													"            var respxv = pm.response.headers.get(\"x-v\");",
													"            Number.isInteger(respxv);",
													"        });",
													"",
													"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
													"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
													"        });",
													"} else {",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
													"}",
													"",
													"",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "1c310adf-5850-4dbc-beb9-10c6f5be0120",
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text",
												"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction."
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text",
												"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls."
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text",
												"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls."
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text",
												"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text",
												"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls."
											}
										],
										"body": {
											"mode": "raw",
											"raw": ""
										},
										"url": {
											"raw": "{{authenticatedResourceUrl}}/banking/accounts/:accountId",
											"host": [
												"{{authenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"accounts",
												":accountId"
											],
											"variable": [
												{
													"key": "accountId",
													"value": "{{invalidId}}"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Get Accounts - Out of range page",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
													"{",
													"        // Parse the response body",
													"        var jsonData;",
													"        try { jsonData = pm.response.json(); } catch(e) {}",
													"",
													"",
													"        // HTTP Response and headers",
													"        pm.test(\"Status code is 422\", function () {",
													"            pm.response.to.have.status(422);",
													"        });",
													"",
													"        pm.test(\"Content-Type header specifies json\", function () {",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
													"        });",
													"",
													"",
													"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
													"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
													"        });",
													"",
													"",
													"        // Schema payload check",
													"        pm.test('Response payload conforms to standards schema', function() {",
													"            const valid = ajv.validate(\"ResponseErrorListV2\", jsonData)",
													"            if (!valid){",
													"            ajv.errors.forEach(element => {",
													"                console.log(JSON.stringify(element));",
													"                });",
													"            };",
													"            pm.expect(valid).to.be.true; ",
													"        });        ",
													"} else {",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
													"}",
													"",
													"",
													"",
													"",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"var pageSize = pm.variables.get(\"pageSizeAccounts\");\r",
													"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
													"    pm.variables.set(\"pageSize\", pageSize);\r",
													"}\r",
													"\r",
													"// The totalAccountsPages is set in the previous \"******** - First page\" request\r",
													"var totalPages = pm.variables.get(\"totalAccountsPages\");\r",
													"//let currentPage = totalPages + 1;\r",
													"let currentPage = 99999;\r",
													"pm.variables.set(\"currentPage\", currentPage)\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "2907ed9c-ac30-4993-b9c6-25e50a6ba427",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text"
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text"
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text"
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{authenticatedResourceUrl}}/banking/accounts?open-status=ALL&page={{currentPage}}&page-size={{pageSize}}",
											"host": [
												"{{authenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"accounts"
											],
											"query": [
												{
													"key": "open-status",
													"value": "ALL",
													"description": "Used to filter results according to open/closed status. Values can be OPEN, CLOSED or ALL. If absent then ALL is assumed"
												},
												{
													"key": "page",
													"value": "{{currentPage}}",
													"description": "Page of results to request (standard pagination)"
												},
												{
													"key": "page-size",
													"value": "{{pageSize}}",
													"description": "Page size to request. Default is 25 (standard pagination)"
												}
											]
										}
									},
									"response": []
								}
							],
							"id": "c8842d46-bbee-4e46-a08c-db67a7eae906"
						},
						{
							"name": "payments",
							"item": [
								{
									"name": "scheduled",
									"item": [
										{
											"name": "Get Scheduled Payments Bulk - First page",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        // Parse the response body\r",
															"        var jsonData;\r",
															"        try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"        // HTTP Response and headers\r",
															"        pm.test(\"Status code is 200\", function () {\r",
															"            pm.response.to.have.status(200);\r",
															"        });\r",
															"\r",
															"        pm.test(\"Content-Type header specifies json\", function () {\r",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-v header is present and has correct value\", function () {\r",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"            var checkValue = Math.min(requestXv, requestMinXv);\r",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"            pm.expect(responseXv).gte(checkValue);\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-v header is present is integer\", function () {\r",
															"            var respxv = pm.response.headers.get(\"x-v\");\r",
															"            Number.isInteger(respxv);\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"        });\r",
															"\r",
															"        // Pagination tests\r",
															"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"            pm.expect(jsonData.meta.totalPages >= 0);\r",
															"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"        });\r",
															"\r",
															"        var currentPage = pm.variables.get(\"currentPage\");\r",
															"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"\r",
															"        pm.variables.set(\"totalScheduledPaymentsPages\", currentTotalPages);\r",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        // pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
															"        // pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
															"        });\r",
															"\r",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            //pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
															"            //pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        // Schema payload check\r",
															"        pm.test('Response payload conforms to standards schema', function() {\r",
															"            const valid = ajv.validate(\"ResponseBankingScheduledPaymentsList\", jsonData)\r",
															"            if (!valid){\r",
															"            ajv.errors.forEach(element => {\r",
															"                console.log(JSON.stringify(element));\r",
															"                });\r",
															"            };\r",
															"            pm.expect(valid).to.be.true; \r",
															"        });         \r",
															"} else {\r",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"currentPage\", 1);\r",
															"var pageSize = pm.variables.get(\"pageSizeScheduledPayments\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "f2c952d7-1952-427e-848b-612efb1b5fa7",
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/payments/scheduled?product-category=CRED_AND_CHRG_CARDS&open-status=ALL&is-owned=true&page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"payments",
														"scheduled"
													],
													"query": [
														{
															"key": "product-category",
															"value": "CRED_AND_CHRG_CARDS",
															"description": "Used to filter results on the productCategory field applicable to accounts. Any one of the valid values for this field can be supplied. If absent then all accounts returned."
														},
														{
															"key": "open-status",
															"value": "ALL",
															"description": "Used to filter results according to open/closed status. Values can be OPEN, CLOSED or ALL. If absent then ALL is assumed"
														},
														{
															"key": "is-owned",
															"value": "true",
															"description": "Filters accounts based on whether they are owned by the authorised customer.  True for owned accounts, false for unowned accounts and absent for all accounts"
														},
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													]
												},
												"description": "Obtain scheduled payments for multiple, filtered accounts that are the source of funds for the payments"
											},
											"response": []
										},
										{
											"name": "Get Scheduled Payments Bulk - Other pages",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        // Determine if this is the last time this request is run by looking at the pageArray\r",
															"        const pageArray = pm.variables.get(\"pageArray\");\r",
															"        if (pageArray && pageArray.length > 0){\r",
															"            postman.setNextRequest(\"Get Scheduled Payments Bulk - Other pages\");\r",
															"            } else {\r",
															"                postman.setNextRequest(\"Get Scheduled Payments For Specific Accounts - First page\");       \r",
															"            }\r",
															"\r",
															"\r",
															"        // Parse the response body\r",
															"        var jsonData;\r",
															"        try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"\r",
															"        // HTTP Response and headers\r",
															"        pm.test(\"Status code is 200\", function () {\r",
															"            pm.response.to.have.status(200);\r",
															"        });\r",
															"\r",
															"        pm.test(\"Content-Type header specifies json\", function () {\r",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-v header is present and has correct value\", function () {\r",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"            var checkValue = Math.min(requestXv, requestMinXv);\r",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"            pm.expect(responseXv).gte(checkValue);\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"        });\r",
															"\r",
															"\r",
															"        // Pagination tests\r",
															"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"            pm.expect(jsonData.meta.totalPages >= 0);\r",
															"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"        });\r",
															"\r",
															"        var currentPage = pm.variables.get(\"currentPage\");\r",
															"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"\r",
															"        pm.collectionVariables.set(\"totalScheduledPaymentsPages\", currentTotalPages);\r",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        // pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
															"        // pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
															"        });\r",
															"\r",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            //pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
															"            //pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        // Schema payload check\r",
															"        pm.test('Response payload conforms to standards schema', function() {\r",
															"            const valid = ajv.validate(\"ResponseBankingScheduledPaymentsList\", jsonData)\r",
															"            if (!valid){\r",
															"            ajv.errors.forEach(element => {\r",
															"                console.log(JSON.stringify(element));\r",
															"                });\r",
															"            };\r",
															"            pm.expect(valid).to.be.true; \r",
															"        });    \r",
															"\r",
															"} else {\r",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															"\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"var pageSize = pm.variables.get(\"pageSizeScheduledPayments\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}\r",
															"var totalPages = pm.variables.get(\"totalScheduledPaymentsPages\");\r",
															"var pageArray = pm.variables.get(\"pageArray\");\r",
															"console.log(\"Page array is \" + pageArray);\r",
															"if(!pageArray || pageArray.length == 0) {\r",
															"    for(var i = 1; i <= totalPages; i++)\r",
															"        pageArray.push(i);\r",
															"}\r",
															"\r",
															"let currentPage = pageArray.shift();\r",
															"if (currentPage == null) {currentPage = 1} else {\r",
															"    pm.variables.set(\"currentPage\", currentPage);\r",
															"}\r",
															"\r",
															"pm.variables.set(\"pageArray\", pageArray);"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "696e4c3a-f9c6-4002-81ad-5aebcddf0223",
											"request": {
												"method": "GET",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/payments/scheduled?product-category=CRED_AND_CHRG_CARDS&open-status=ALL&is-owned=true&page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"payments",
														"scheduled"
													],
													"query": [
														{
															"key": "product-category",
															"value": "CRED_AND_CHRG_CARDS",
															"description": "Used to filter results on the productCategory field applicable to accounts. Any one of the valid values for this field can be supplied. If absent then all accounts returned."
														},
														{
															"key": "open-status",
															"value": "ALL",
															"description": "Used to filter results according to open/closed status. Values can be OPEN, CLOSED or ALL. If absent then ALL is assumed"
														},
														{
															"key": "is-owned",
															"value": "true",
															"description": "Filters accounts based on whether they are owned by the authorised customer.  True for owned accounts, false for unowned accounts and absent for all accounts"
														},
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													]
												},
												"description": "Obtain scheduled payments for multiple, filtered accounts that are the source of funds for the payments"
											},
											"response": []
										},
										{
											"name": "Get Scheduled Payments For Specific Accounts - First page",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        // Parse the response body\r",
															"        var jsonData;\r",
															"        try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"\r",
															"        // HTTP Response and headers\r",
															"        pm.test(\"Status code is 200\", function () {\r",
															"            pm.response.to.have.status(200);\r",
															"        });\r",
															"\r",
															"        pm.test(\"Content-Type header specifies json\", function () {\r",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-v header is present and has correct value\", function () {\r",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"            var checkValue = Math.min(requestXv, requestMinXv);\r",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"            pm.expect(responseXv).gte(checkValue);\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"        });\r",
															"\r",
															"\r",
															"        // Pagination tests\r",
															"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"            pm.expect(jsonData.meta.totalPages >= 0);\r",
															"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"        });\r",
															"\r",
															"        var currentPage = pm.variables.get(\"currentPage\");\r",
															"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"\r",
															"\r",
															"        pm.variables.set(\"totalScheduledPaymentsPages\", currentTotalPages);\r",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        // pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
															"        // pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
															"        });\r",
															"\r",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            //pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
															"            //pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        // Schema payload check\r",
															"        pm.test('Response payload conforms to standards schema', function() {\r",
															"            const valid = ajv.validate(\"ResponseBankingScheduledPaymentsList\", jsonData)\r",
															"            if (!valid){\r",
															"            ajv.errors.forEach(element => {\r",
															"                console.log(JSON.stringify(element));\r",
															"                });\r",
															"            };\r",
															"            pm.expect(valid).to.be.true; \r",
															"        });    \r",
															"\r",
															"} else {\r",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"pm.variables.set(\"currentPage\", 1);\r",
															"var pageSize = pm.variables.get(\"pageSizeScheduledPayments\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "4ccc7d80-db1e-4e7a-a1fb-62ce756f3084",
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n    \"data\": {\n        \"accountIds\": [\n            \"{{testAccountId1}}\",\n            \"{{testAccountId2}}\"\n        ]\n    },\n    \"meta\": {}\n}"
												},
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/payments/scheduled?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"payments",
														"scheduled"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													]
												},
												"description": "Obtain scheduled payments for a specified list of accounts"
											},
											"response": []
										},
										{
											"name": "Get Scheduled Payments For Specific Accounts - Other pages",
											"event": [
												{
													"listen": "test",
													"script": {
														"exec": [
															"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
															"{\r",
															"        // Determine if this is the last time this request is run by looking at the pageArray\r",
															"        const pageArray = pm.variables.get(\"pageArray\");\r",
															"        if (pageArray && pageArray.length > 0){\r",
															"            postman.setNextRequest(\"Get Scheduled Payments For Specific Accounts - Other pages\");\r",
															"            } else {   \r",
															"                postman.setNextRequest(\"Get Payees - First page\");       \r",
															"            }\r",
															"\r",
															"        // Parse the response body\r",
															"        var jsonData;\r",
															"        try { jsonData = pm.response.json(); } catch(e) {}\r",
															"\r",
															"\r",
															"        // HTTP Response and headers\r",
															"        pm.test(\"Status code is 200\", function () {\r",
															"            pm.response.to.have.status(200);\r",
															"        });\r",
															"\r",
															"        pm.test(\"Content-Type header specifies json\", function () {\r",
															"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-v header is present and has correct value\", function () {\r",
															"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
															"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
															"            var checkValue = Math.min(requestXv, requestMinXv);\r",
															"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
															"            pm.expect(responseXv).gte(checkValue);\r",
															"        });\r",
															"\r",
															"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
															"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
															"        });\r",
															"\r",
															"        // Pagination tests\r",
															"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
															"            pm.expect(jsonData.meta.totalPages >= 0);\r",
															"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
															"        });\r",
															"\r",
															"        var currentPage = pm.variables.get(\"currentPage\");\r",
															"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
															"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
															"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
															"\r",
															"        pm.collectionVariables.set(\"totalScheduledPaymentsPages\", currentTotalPages);\r",
															"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
															"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
															"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
															"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
															"\r",
															"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        // pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
															"        // pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
															"        });\r",
															"\r",
															"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
															"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
															"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
															"            //pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
															"            //pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
															"        });\r",
															"\r",
															"        // Schema payload check\r",
															"        pm.test('Response payload conforms to standards schema', function() {\r",
															"            const valid = ajv.validate(\"ResponseBankingScheduledPaymentsList\", jsonData)\r",
															"            if (!valid){\r",
															"            ajv.errors.forEach(element => {\r",
															"                console.log(JSON.stringify(element));\r",
															"                });\r",
															"            };\r",
															"            pm.expect(valid).to.be.true; \r",
															"        });    \r",
															"\r",
															"\r",
															"} else {\r",
															"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
															"}\r",
															""
														],
														"type": "text/javascript"
													}
												},
												{
													"listen": "prerequest",
													"script": {
														"exec": [
															"var pageSize = pm.variables.get(\"pageSizeScheduledPayments\");\r",
															"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
															"    pm.variables.set(\"pageSize\", pageSize);\r",
															"}\r",
															"\r",
															"var totalPages = pm.variables.get(\"totalScheduledPaymentsPages\");\r",
															"var pageArray = pm.variables.get(\"pageArray\");\r",
															"\r",
															"if(!pageArray || pageArray.length == 0) {\r",
															"    for(var i = 1; i <= totalPages; i++)\r",
															"        pageArray.push(i);\r",
															"}\r",
															"\r",
															"let currentPage = pageArray.shift();\r",
															"if (currentPage == null) {currentPage = 1} else {\r",
															"pm.variables.set(\"currentPage\", currentPage);\r",
															"}\r",
															"pm.variables.set(\"currentPage\", currentPage);\r",
															"pm.variables.set(\"pageArray\", pageArray);"
														],
														"type": "text/javascript"
													}
												}
											],
											"id": "a4f4323a-c0ac-45b8-9c75-cf8d3f8ba0dc",
											"request": {
												"method": "POST",
												"header": [
													{
														"key": "x-v",
														"value": "{{x-v}}",
														"type": "text"
													},
													{
														"key": "x-min-v",
														"value": "{{x-min-v}}",
														"type": "text"
													},
													{
														"key": "x-fapi-interaction-id",
														"value": "{{interactionId}}",
														"type": "text"
													},
													{
														"key": "x-fapi-auth-date",
														"value": "{{timeTenMinutesAgo}}",
														"type": "text"
													},
													{
														"key": "x-fapi-customer-ip-address",
														"value": "127.0.0.1",
														"type": "text"
													},
													{
														"key": "x-cds-client-headers",
														"value": "{{cdsClientHeader}}",
														"type": "text"
													},
													{
														"key": "Content-Type",
														"value": "application/json",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n    \"data\": {\n        \"accountIds\": [\n            \"{{testAccountId1}}\",\n            \"{{testAccountId2}}\"\n        ]\n    },\n    \"meta\": {}\n}"
												},
												"url": {
													"raw": "{{authenticatedResourceUrl}}/banking/payments/scheduled?page={{currentPage}}&page-size={{pageSize}}",
													"host": [
														"{{authenticatedResourceUrl}}"
													],
													"path": [
														"banking",
														"payments",
														"scheduled"
													],
													"query": [
														{
															"key": "page",
															"value": "{{currentPage}}",
															"description": "Page of results to request (standard pagination)"
														},
														{
															"key": "page-size",
															"value": "{{pageSize}}",
															"description": "Page size to request. Default is 25 (standard pagination)"
														}
													]
												},
												"description": "Obtain scheduled payments for a specified list of accounts"
											},
											"response": []
										}
									],
									"id": "643835c8-7134-40a5-a7d9-7aaab735106d"
								}
							],
							"id": "82bf984c-ea74-4864-a5a8-38e5faa7dc51"
						},
						{
							"name": "payees",
							"item": [
								{
									"name": "Get Payees - First page",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
													"{\r",
													"        // Parse the response body\r",
													"        var jsonData;\r",
													"        try { jsonData = pm.response.json(); } catch(e) {}\r",
													"\r",
													"        // HTTP Response and headers\r",
													"        pm.test(\"Status code is 200\", function () {\r",
													"            pm.response.to.have.status(200);\r",
													"        });\r",
													"\r",
													"        pm.test(\"Content-Type header specifies json\", function () {\r",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
													"        });\r",
													"\r",
													"        pm.test(\"x-v header is present and has correct value\", function () {\r",
													"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
													"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
													"            var checkValue = Math.min(requestXv, requestMinXv);\r",
													"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
													"            pm.expect(responseXv).gte(checkValue);\r",
													"        });\r",
													"\r",
													"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
													"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
													"        });\r",
													"        // Pagination tests\r",
													"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
													"            pm.expect(jsonData.meta.totalPages >= 0);\r",
													"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
													"        });\r",
													"\r",
													"        var currentPage = pm.variables.get(\"currentPage\");\r",
													"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
													"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
													"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
													"\r",
													"        pm.variables.set(\"totalPayeePages\", currentTotalPages);\r",
													"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
													"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
													"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
													"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
													"\r",
													"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
													"        });\r",
													"\r",
													"\r",
													"\r",
													"        // Schema payload check\r",
													"        pm.test('Response payload conforms to standards schema', function() {\r",
													"            const valid = ajv.validate(\"ResponseBankingPayeeListV2\", jsonData)\r",
													"            if (!valid){\r",
													"            ajv.errors.forEach(element => {\r",
													"                console.log(JSON.stringify(element));\r",
													"                });\r",
													"            };\r",
													"            pm.expect(valid).to.be.true; \r",
													"        });    \r",
													"\r",
													"} else {\r",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
													"}\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.variables.set(\"currentPage\", 1);\r",
													"var pageSize = pm.variables.get(\"pageSizePayees\");\r",
													"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
													"    pm.variables.set(\"pageSize\", pageSize);\r",
													"}\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "41d9af74-860b-4cde-98c9-99d1a1981485",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text",
												"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction."
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text",
												"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls."
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text",
												"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls."
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text",
												"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text",
												"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls."
											}
										],
										"url": {
											"raw": "{{authenticatedResourceUrl}}/banking/payees?type=ALL&page={{currentPage}}&page-size={{pageSize}}",
											"host": [
												"{{authenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"payees"
											],
											"query": [
												{
													"key": "type",
													"value": "ALL",
													"description": "Filter on the payee type field.  In addition to normal type field values, ALL can be specified to retrieve all payees.  If absent the assumed value is ALL"
												},
												{
													"key": "page",
													"value": "{{currentPage}}",
													"description": "Page of results to request (standard pagination)"
												},
												{
													"key": "page-size",
													"value": "{{pageSize}}",
													"description": "Page size to request. Default is 25 (standard pagination)"
												}
											]
										},
										"description": "Obtain a list of pre-registered payees"
									},
									"response": []
								},
								{
									"name": "Get Payees - Other pages",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
													"{\r",
													"        // Determine the next test request\r",
													"        const pageArray = pm.variables.get(\"pageArray\");\r",
													"        if (pageArray && pageArray.length > 0){\r",
													"            postman.setNextRequest(\"Get Payees - Other pages\");\r",
													"            } else {\r",
													"                postman.setNextRequest(\"Get Payee Detail\");       \r",
													"            }\r",
													"\r",
													"\r",
													"        // Parse the response body\r",
													"        var jsonData;\r",
													"        try { jsonData = pm.response.json(); } catch(e) {}\r",
													"\r",
													"\r",
													"        // HTTP Response and headers\r",
													"        pm.test(\"Status code is 200\", function () {\r",
													"            pm.response.to.have.status(200);\r",
													"        });\r",
													"\r",
													"        pm.test(\"Content-Type header specifies json\", function () {\r",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
													"        });\r",
													"\r",
													"        pm.test(\"x-v header is present and has correct value\", function () {\r",
													"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
													"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
													"            var checkValue = Math.min(requestXv, requestMinXv);\r",
													"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
													"            pm.expect(responseXv).gte(checkValue);\r",
													"        });\r",
													"\r",
													"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
													"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
													"        });\r",
													"\r",
													"        // Pagination tests\r",
													"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
													"            pm.expect(jsonData.meta.totalPages >= 0);\r",
													"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
													"        });\r",
													"\r",
													"        var currentPage = pm.variables.get(\"currentPage\");\r",
													"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
													"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
													"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
													"\r",
													"        pm.collectionVariables.set(\"totalPayeePages\", currentTotalPages);\r",
													"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
													"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
													"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
													"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
													"\r",
													"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
													"        });\r",
													"\r",
													"\r",
													"        // Schema payload check\r",
													"        pm.test('Response payload conforms to standards schema', function() {\r",
													"            const valid = ajv.validate(\"ResponseBankingPayeeListV2\", jsonData)\r",
													"            if (!valid){\r",
													"            ajv.errors.forEach(element => {\r",
													"                console.log(JSON.stringify(element));\r",
													"                });\r",
													"            };\r",
													"            pm.expect(valid).to.be.true; \r",
													"        });  \r",
													"\r",
													"\r",
													"} else {\r",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
													"}\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"var pageSize = pm.variables.get(\"pageSizePayees\");\r",
													"if (pageSize == undefined) {pm.variables.set(\"pageSize\", 25);} else {\r",
													"    pm.variables.set(\"pageSize\", pageSize);\r",
													"}\r",
													"\r",
													"var totalPages = pm.variables.get(\"totalPayeePages\");\r",
													"var pageArray = pm.variables.get(\"pageArray\");\r",
													"\r",
													"if(!pageArray || pageArray.length == 0) {\r",
													"    for(var i = 1; i <= totalPages; i++)\r",
													"        pageArray.push(i);\r",
													"}\r",
													"\r",
													"let currentPage = pageArray.shift();\r",
													"if (currentPage == null) {pm.variables.set(\"currentPage\", 1)} else {\r",
													"pm.variables.set(\"currentPage\", currentPage);\r",
													"}\r",
													"pm.variables.set(\"pageArray\", pageArray);"
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "eef2fc7c-329f-4462-b692-5fb1abbcf3b3",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text",
												"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction."
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text",
												"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls."
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text",
												"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls."
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text",
												"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text",
												"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls."
											}
										],
										"url": {
											"raw": "{{authenticatedResourceUrl}}/banking/payees?type=ALL&page={{currentPage}}&page-size={{pageSize}}",
											"host": [
												"{{authenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"payees"
											],
											"query": [
												{
													"key": "type",
													"value": "ALL",
													"description": "Filter on the payee type field.  In addition to normal type field values, ALL can be specified to retrieve all payees.  If absent the assumed value is ALL"
												},
												{
													"key": "page",
													"value": "{{currentPage}}",
													"description": "Page of results to request (standard pagination)"
												},
												{
													"key": "page-size",
													"value": "{{pageSize}}",
													"description": "Page size to request. Default is 25 (standard pagination)"
												}
											]
										},
										"description": "Obtain a list of pre-registered payees"
									},
									"response": []
								},
								{
									"name": "Get Payee Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
													"{\r",
													"        // if no id is provided we will skip these tests\r",
													"        if (pm.variables.get(\"testPayeeId\") != \"\")\r",
													"        {\r",
													"                // Parse the response body\r",
													"                var jsonData;\r",
													"                try { jsonData = pm.response.json(); } catch(e) {}\r",
													"                // HTTP Response and headers\r",
													"                pm.test(\"Status code is 200\", function () {\r",
													"                    pm.response.to.have.status(200);\r",
													"                });\r",
													"\r",
													"                pm.test(\"Content-Type header specifies json\", function () {\r",
													"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
													"                });\r",
													"\r",
													"                pm.test(\"x-v header is present and has correct value\", function () {\r",
													"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
													"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
													"                    var checkValue = Math.min(requestXv, requestMinXv);\r",
													"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
													"                    pm.expect(responseXv).gte(checkValue);\r",
													"                });\r",
													"\r",
													"                pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
													"                    pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
													"                });\r",
													"\r",
													"\r",
													"        // Schema payload check\r",
													"        pm.test('Response payload conforms to standards schema', function() {\r",
													"            const valid = ajv.validate(\"ResponseBankingPayeeByIDV2\", jsonData)\r",
													"            if (!valid){\r",
													"            ajv.errors.forEach(element => {\r",
													"                console.log(JSON.stringify(element));\r",
													"                });\r",
													"            };\r",
													"            pm.expect(valid).to.be.true; \r",
													"        });  \r",
													"    }\r",
													"\r",
													"} else {\r",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
													"}\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "ef09f815-613f-49c1-8aaa-4c32e6ec6ac2",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text",
												"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction."
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text",
												"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls."
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text",
												"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls."
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text",
												"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text",
												"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls."
											}
										],
										"url": {
											"raw": "{{authenticatedResourceUrl}}/banking/payees/:payeeId",
											"host": [
												"{{authenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"payees",
												":payeeId"
											],
											"variable": [
												{
													"key": "payeeId",
													"value": "{{testPayeeId}}",
													"description": "The ID used to locate the details of a particular payee"
												}
											]
										},
										"description": "Obtain detailed information on a single payee"
									},
									"response": []
								},
								{
									"name": "Get Payee Detail - Invalid Payee",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
													"{\r",
													"        // Parse the response body\r",
													"        var jsonData = null;\r",
													"        if (pm.response.jsonData != null) {\r",
													"            jsonData = pm.response.json();\r",
													"        }\r",
													"        //var jsonData = pm.response?.json();\r",
													"\r",
													"        // HTTP Response and headers\r",
													"        pm.test(\"Status code is 404\", function () {\r",
													"            pm.response.to.have.status(404);\r",
													"        });\r",
													"\r",
													"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
													"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
													"        });\r",
													"\r",
													"} else {\r",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
													"}\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "cc7f832e-98a9-4416-a79f-1af22c963ac4",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text",
												"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction."
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text",
												"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls."
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text",
												"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls."
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text",
												"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text",
												"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls."
											}
										],
										"url": {
											"raw": "{{authenticatedResourceUrl}}/banking/payees/:payeeId",
											"host": [
												"{{authenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"payees",
												":payeeId"
											],
											"variable": [
												{
													"key": "payeeId",
													"value": "{{invalidId}}",
													"description": "The ID used to locate the details of a particular payee"
												}
											]
										},
										"description": "Obtain detailed information on a single payee"
									},
									"response": []
								}
							],
							"id": "aad77758-bee9-424b-b5a7-4e555da45e1d"
						},
						{
							"name": "products",
							"item": [
								{
									"name": "Get Products - First page",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true)\r",
													"{\r",
													"        // Parse the response body\r",
													"        var jsonData;\r",
													"        try { jsonData = pm.response.json(); } catch(e) {}\r",
													"\r",
													"\r",
													"        // HTTP Response and headers\r",
													"        pm.test(\"Status code is 200\", function () {\r",
													"            pm.response.to.have.status(200);\r",
													"        });\r",
													"\r",
													"        pm.test(\"Content-Type header specifies json\", function () {\r",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
													"        });\r",
													"\r",
													"        pm.test(\"x-v header is present and has correct value\", function () {\r",
													"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
													"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
													"            var checkValue = Math.min(requestXv, requestMinXv);\r",
													"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
													"            pm.expect(responseXv).gte(checkValue);\r",
													"        });\r",
													"\r",
													"\r",
													"\r",
													"        // Pagination tests\r",
													"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
													"            pm.expect(jsonData.meta.totalPages >= 0);\r",
													"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
													"        });\r",
													"        var currentPage = pm.variables.get(\"currentPage\");\r",
													"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
													"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
													"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
													"\r",
													"        pm.variables.set(\"totalProductPages\", currentTotalPages);\r",
													"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
													"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
													"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
													"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
													"\r",
													"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
													"        });\r",
													"\r",
													"        // Schema payload check\r",
													"        pm.test('Response payload conforms to standards schema', function() {\r",
													"            const valid = ajv.validate(\"ResponseBankingProductListV2\", jsonData)\r",
													"            if (!valid){\r",
													"            ajv.errors.forEach(element => {\r",
													"                console.log(JSON.stringify(element));\r",
													"                });\r",
													"            };\r",
													"            pm.expect(valid).to.be.true; \r",
													"        });    \r",
													"}\r",
													"else \r",
													"{\r",
													"\t    console.error(\"Minimum variable set not defined for test: baseUrl\");\r",
													"}\r",
													"\r",
													"\r",
													"\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"pm.collectionVariables.set(\"productCategory\", \"BUSINESS_LOANS\");\r",
													"pm.collectionVariables.set(\"effective\", \"CURRENT\");\r",
													"\r",
													"// var pageSize = pm.variables.get(\"pageSizeProducts\");\r",
													"// pm.variables.set(\"currentPage\", 1);\r",
													"// if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
													"//     pm.variables.set(\"pageSize\", pageSize);\r",
													"// }\r",
													"\r",
													"// First page is always 1\r",
													"pm.variables.set(\"currentPage\", 1);\r",
													"// if a page size is specified use it, otherwise default\r",
													"var pageSize = pm.variables.get(\"pageSizeProducts\");\r",
													"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
													"    pm.variables.set(\"pageSize\", pageSize);\r",
													"}"
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "5646b791-d992-43d3-b286-c38d4afc2bf5",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{unauthenticatedResourceUrl}}/banking/products?effective={{effective}}&product-category={{productCategory}}&page={{currentPage}}&page-size={{pageSize}}",
											"host": [
												"{{unauthenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"products"
											],
											"query": [
												{
													"key": "effective",
													"value": "{{effective}}"
												},
												{
													"key": "product-category",
													"value": "{{productCategory}}"
												},
												{
													"key": "page",
													"value": "{{currentPage}}"
												},
												{
													"key": "page-size",
													"value": "{{pageSize}}"
												}
											]
										},
										"description": "Obtain a list of products that are currently openly offered to the market\n\nNote that the results returned by this end point are expected to be ordered according to updated-since\n\n### Conventions\nIn the product reference payloads there are a number of recurring conventions that are explained here, in one place.\n\n#### Arrays Of Features\n\nIn the product detail payload there are a number of arrays articulating generic features, constraints, prices, etc. The intent of these arrays is as follows:\n\n- Each element in an array has the same structure so that clients can reliably interpret the payloads\n- Each element as a type element that is an enumeration of the specific aspect of a product being described, such as types of fees.\n- Each element has a field name [additionalValue](#productfeaturetypedoc).  This is a generic field with contents that will vary based on the type of object being described. The contents of this field for the ADDITIONAL_CARDS feature is the number of cards allowed while the contents of this field for the MAX_LIMIT constraint would be the maximum credit limit allowed for the product.\n- An element in these arrays of the same type may appear more than once. For instance, a product may offer two separate loyalty programs that the customer can select from. A fixed term mortgage may have different rates for different term lengths.\n- An element in these arrays may contain an additionalInfo and additionalInfoUri field. The additionalInfo field is used to provide displayable text clarifying the purpose of the element in some way when the product is presented to a customer. The additionalInfoUri provides a link to externally hosted information specifically relevant to that feature of the product.\n- Depending on the type of data being represented there may be additional specific fields.\n\n#### URIs To More Information\n\nAs the complexities and nuances of a financial product can not easily be fully expressed in a data structure without a high degree of complexity it is necessary to provide additional reference information that a potential customer can access so that they are fully informed of the features and implications of the product. The payloads for product reference therefore contain numerous fields that are provided to allow the product holder to describe the product more fully using a web page hosted on their online channels.\n\nThese URIs do not need to all link to different pages. If desired, they can all link to a single hosted page and use difference HTML anchors to focus on a specific topic such as eligibility or fees.\n\n#### Linkage To Accounts\nFrom the moment that a customer applies for a product and an account is created the account and the product that spawned it will diverge.  Rates and features of the product may change and a discount may be negotiated for the account.\n\nFor this reason, while productCategory is a common field between accounts and products, there is no specific ID that can be used to link an account to a product within the regime.\n\nSimilarly, many of the fields and objects in the product payload will appear in the account detail payload but the structures and semantics are not identical as one refers to a product that can potentially be originated and one refers to an account that actual has been instantiated and created along with the associated decisions inherent in that process.\n\n#### Dates\nIt is expected that data consumers needing this data will call relatively frequently to ensure the data they have is representative of the current offering from a bank.  To minimise the volume and frequency of these calls the ability to set a lastUpdated field with the date and time of the last update to this product is included.  A call for a list of products can then be filtered to only return products that have been updated since the last time that data was obtained using the updated-since query parameter.\n\nIn addition, the concept of effective date and time has also been included.  This allows for a product to be marked for obsolescence, or introduction, from a certain time without the need for an update to show that a product has been changed.  The inclusion of these dates also removes the need to represent deleted products in the payload.  Products that are no long offered can be marked not effective for a few weeks before they are then removed from the product set as an option entirely."
									},
									"response": []
								},
								{
									"name": "Get Products - Other pages",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true)\r",
													"{\r",
													"        // Determine the next test request\r",
													"        const pageArray = pm.variables.get(\"pageArray\");\r",
													"        if (pageArray && pageArray.length > 0){\r",
													"            postman.setNextRequest(\"Get Products - Other pages\");\r",
													"            } else {\r",
													"                postman.setNextRequest(\"Get Product Detail\");       \r",
													"            }\r",
													"\r",
													"        // Parse the response body\r",
													"        var jsonData;\r",
													"        try { jsonData = pm.response.json(); } catch(e) {}\r",
													"\r",
													"\r",
													"        // HTTP Response and headers\r",
													"        pm.test(\"Status code is 200\", function () {\r",
													"            pm.response.to.have.status(200);\r",
													"        });\r",
													"\r",
													"        pm.test(\"Content-Type header specifies json\", function () {\r",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
													"        });\r",
													"\r",
													"        pm.test(\"x-v header is present and has correct value\", function () {\r",
													"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
													"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
													"            var checkValue = Math.min(requestXv, requestMinXv);\r",
													"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
													"            pm.expect(responseXv).gte(checkValue);\r",
													"        });\r",
													"\r",
													"\r",
													"        // Pagination tests\r",
													"        pm.test(\"Pagination fields in meta data are present\", function () {\r",
													"            pm.expect(jsonData.meta.totalPages >= 0);\r",
													"            pm.expect(jsonData.meta.totalRecords >= 0);\r",
													"        });\r",
													"        var currentPage = pm.variables.get(\"currentPage\");\r",
													"        var currentPageSize = pm.variables.get(\"pageSize\");\r",
													"        var currentTotalPages = jsonData?.meta?.totalPages;\r",
													"        var currentTotalRecords = jsonData?.meta?.totalRecords;\r",
													"\r",
													"        pm.variables.set(\"totalProductPages\", currentTotalPages);\r",
													"        var isFirstPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 1;\r",
													"        var isMiddlePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 2;\r",
													"        var isLastPage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 3;\r",
													"        var isSingleResponsePage = utils.whichPage(currentPage,currentTotalPages, currentTotalRecords, currentPageSize) == 0;\r",
													"\r",
													"        ((isSingleResponsePage) ? pm.test : pm.test.skip)(\"Single-page correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isFirstPage) ? pm.test : pm.test.skip)(\"Multi-page: First page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
													"        // pm.expect(jsonData.links).to.not.have.property(\"first\");\r",
													"        // pm.expect(jsonData.links).to.not.have.property(\"prev\");\r",
													"        });\r",
													"\r",
													"        ((isMiddlePage) ? pm.test : pm.test.skip)(\"Multi-page: Middle page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"next\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"last\");\r",
													"        });\r",
													"\r",
													"        ((isLastPage) ? pm.test : pm.test.skip)(\"Multi-page: Last page  correct links in response\", function () {\r",
													"            pm.expect(jsonData.links).to.have.property(\"self\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"first\");\r",
													"            pm.expect(jsonData.links).to.have.property(\"prev\");\r",
													"            //pm.expect(jsonData.links).to.not.have.property(\"next\");\r",
													"            //pm.expect(jsonData.links).to.not.have.property(\"last\");\r",
													"        });\r",
													"        // Schema payload check\r",
													"        pm.test('Response payload conforms to standards schema', function() {\r",
													"            const valid = ajv.validate(\"ResponseBankingProductListV2\", jsonData)\r",
													"            if (!valid){\r",
													"            ajv.errors.forEach(element => {\r",
													"                console.log(JSON.stringify(element));\r",
													"                });\r",
													"            };\r",
													"            pm.expect(valid).to.be.true; \r",
													"        }); \r",
													"\r",
													"   \r",
													"} else {\r",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl\");\r",
													"}\r",
													"\r",
													"\r",
													"\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													"// var pageSize = pm.variables.get(\"pageSizeProducts\");\r",
													"// if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
													"//     pm.variables.set(\"pageSize\", pageSize);\r",
													"// }\r",
													"\r",
													"// var totalPages = Math.ceil(pm.variables.get(\"totalProductPages\"), 1);\r",
													"// if(!pageArray || pageArray.length == 0) {\r",
													"\r",
													"// }\r",
													"\r",
													"// if(!pageArray) {\r",
													"//     var pageArray = pm.variables.get(\"pageArray\");\r",
													"//     if (pageArray.length == 0) {\r",
													"//         for(var i = 1; i <= totalPages; i++)\r",
													"//             pageArray.push(i);\r",
													"//         pm.variables.set(\"currentPage\", 1);\r",
													"//     }\r",
													"//     else {\r",
													"//         let currentPage = pageArray.shift();\r",
													"//         if (currentPage == null ) {currentPage = 1} else {\r",
													"//             pm.variables.set(\"currentPage\", currentPage);\r",
													"//     }\r",
													"//     pm.variables.set(\"pageArray\", pageArray);\r",
													"//     }\r",
													"// } else {\r",
													"//     pm.variables.set(\"currentPage\", 1);\r",
													"// }\r",
													"\r",
													"\r",
													"var pageSize = pm.variables.get(\"pageSizeProducts\");\r",
													"if (pageSize == null) {pm.variables.set(\"pageSize\", 25);} else {\r",
													"    pm.variables.set(\"pageSize\", pageSize);\r",
													"}\r",
													"\r",
													"// The totalAccountsPages is set in the previous \"******** - First page\" request\r",
													"var totalPages = Math.ceil(pm.variables.get(\"totalProductPages\"),1);\r",
													"// pageArray is an array of consequtive numbers\r",
													"var pageArray = pm.variables.get(\"pageArray\");\r",
													"\r",
													"if(!pageArray || pageArray.length == 0) {\r",
													"    for(var i = 1; i <= totalPages; i++)\r",
													"        pageArray.push(i);\r",
													"}\r",
													"\r",
													"let currentPage = pageArray.shift();\r",
													"if (currentPage == null) {pm.variables.set(\"currentPage\", 1)} else {\r",
													"    pm.variables.set(\"currentPage\", currentPage);\r",
													"}\r",
													"pm.variables.set(\"pageArray\", pageArray);\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "22b27df7-1848-40aa-bc1d-8af17c5221f0",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{unauthenticatedResourceUrl}}/banking/products?effective={{effective}}&product-category={{productCategory}}&page={{currentPage}}&page-size={{pageSize}}",
											"host": [
												"{{unauthenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"products"
											],
											"query": [
												{
													"key": "effective",
													"value": "{{effective}}"
												},
												{
													"key": "product-category",
													"value": "{{productCategory}}"
												},
												{
													"key": "page",
													"value": "{{currentPage}}"
												},
												{
													"key": "page-size",
													"value": "{{pageSize}}"
												}
											]
										},
										"description": "Obtain a list of products that are currently openly offered to the market\n\nNote that the results returned by this end point are expected to be ordered according to updated-since\n\n### Conventions\nIn the product reference payloads there are a number of recurring conventions that are explained here, in one place.\n\n#### Arrays Of Features\n\nIn the product detail payload there are a number of arrays articulating generic features, constraints, prices, etc. The intent of these arrays is as follows:\n\n- Each element in an array has the same structure so that clients can reliably interpret the payloads\n- Each element as a type element that is an enumeration of the specific aspect of a product being described, such as types of fees.\n- Each element has a field name [additionalValue](#productfeaturetypedoc).  This is a generic field with contents that will vary based on the type of object being described. The contents of this field for the ADDITIONAL_CARDS feature is the number of cards allowed while the contents of this field for the MAX_LIMIT constraint would be the maximum credit limit allowed for the product.\n- An element in these arrays of the same type may appear more than once. For instance, a product may offer two separate loyalty programs that the customer can select from. A fixed term mortgage may have different rates for different term lengths.\n- An element in these arrays may contain an additionalInfo and additionalInfoUri field. The additionalInfo field is used to provide displayable text clarifying the purpose of the element in some way when the product is presented to a customer. The additionalInfoUri provides a link to externally hosted information specifically relevant to that feature of the product.\n- Depending on the type of data being represented there may be additional specific fields.\n\n#### URIs To More Information\n\nAs the complexities and nuances of a financial product can not easily be fully expressed in a data structure without a high degree of complexity it is necessary to provide additional reference information that a potential customer can access so that they are fully informed of the features and implications of the product. The payloads for product reference therefore contain numerous fields that are provided to allow the product holder to describe the product more fully using a web page hosted on their online channels.\n\nThese URIs do not need to all link to different pages. If desired, they can all link to a single hosted page and use difference HTML anchors to focus on a specific topic such as eligibility or fees.\n\n#### Linkage To Accounts\nFrom the moment that a customer applies for a product and an account is created the account and the product that spawned it will diverge.  Rates and features of the product may change and a discount may be negotiated for the account.\n\nFor this reason, while productCategory is a common field between accounts and products, there is no specific ID that can be used to link an account to a product within the regime.\n\nSimilarly, many of the fields and objects in the product payload will appear in the account detail payload but the structures and semantics are not identical as one refers to a product that can potentially be originated and one refers to an account that actual has been instantiated and created along with the associated decisions inherent in that process.\n\n#### Dates\nIt is expected that data consumers needing this data will call relatively frequently to ensure the data they have is representative of the current offering from a bank.  To minimise the volume and frequency of these calls the ability to set a lastUpdated field with the date and time of the last update to this product is included.  A call for a list of products can then be filtered to only return products that have been updated since the last time that data was obtained using the updated-since query parameter.\n\nIn addition, the concept of effective date and time has also been included.  This allows for a product to be marked for obsolescence, or introduction, from a certain time without the need for an update to show that a product has been changed.  The inclusion of these dates also removes the need to represent deleted products in the payload.  Products that are no long offered can be marked not effective for a few weeks before they are then removed from the product set as an option entirely."
									},
									"response": []
								},
								{
									"name": "Get Product Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true)\r",
													"{\r",
													"        // if not id is provided we skip these tests\r",
													"        if (pm.iterationData.get(\"testProductId1\") != \"\")\r",
													"        {\r",
													"                // Parse the response body\r",
													"                var jsonData;\r",
													"                try { jsonData = pm.response.json(); } catch(e) {}\r",
													"                // HTTP Response and headers\r",
													"                pm.test(\"Status code is 200\", function () {\r",
													"                    pm.response.to.have.status(200);\r",
													"                });\r",
													"\r",
													"                pm.test(\"Content-Type header specifies json\", function () {\r",
													"                    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
													"                });\r",
													"\r",
													"                pm.test(\"x-v header is present and has correct value\", function () {\r",
													"                    var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
													"                    var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
													"                    var checkValue = Math.min(requestXv, requestMinXv);\r",
													"                    var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
													"                    pm.expect(responseXv).gte(checkValue);\r",
													"                });\r",
													"\r",
													"        // Schema payload check\r",
													"        pm.test('Response payload conforms to standards schema', function() {\r",
													"            const valid = ajv.validate(\"ResponseBankingProductByIdV4\", jsonData)\r",
													"            if (!valid){\r",
													"            ajv.errors.forEach(element => {\r",
													"                console.log(JSON.stringify(element));\r",
													"                });\r",
													"            };\r",
													"            pm.expect(valid).to.be.true; \r",
													"        }); \r",
													"    }\r",
													"} else {\r",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl\");\r",
													"}\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "1f46f70f-3a15-40a9-a95f-a5bf357bf756",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{unauthenticatedResourceUrl}}/banking/products/:productId",
											"host": [
												"{{unauthenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"products",
												":productId"
											],
											"variable": [
												{
													"key": "productId",
													"value": "{{testProductId}}"
												}
											]
										},
										"description": "Obtain detailed information on a single product offered openly to the market"
									},
									"response": []
								},
								{
									"name": "Get Product Detail - Invalid Product",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true)\r",
													"{\r",
													"        // Parse the response body\r",
													"        var jsonData;\r",
													"        try { jsonData = pm.response.json(); } catch(e) {}\r",
													"\r",
													"        // HTTP Response and headers\r",
													"        pm.test(\"Status code is 404\", function () {\r",
													"            pm.response.to.have.status(404);\r",
													"        });\r",
													"\r",
													"        pm.test(\"Content-Type header specifies json\", function () {\r",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
													"        });\r",
													"\r",
													"        pm.test(\"x-v header is present and has correct value\", function () {\r",
													"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
													"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
													"            var checkValue = Math.min(requestXv, requestMinXv);\r",
													"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
													"            pm.expect(responseXv).gte(checkValue);\r",
													"        });\r",
													"\r",
													"} else {\r",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl\");\r",
													"}\r",
													"\r",
													"\r",
													"\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "484e92dd-c2a7-4840-b1de-7d0eae3f0880",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{unauthenticatedResourceUrl}}/banking/products/:productId",
											"host": [
												"{{unauthenticatedResourceUrl}}"
											],
											"path": [
												"banking",
												"products",
												":productId"
											],
											"variable": [
												{
													"key": "productId",
													"value": "{{invalidId}}"
												}
											]
										},
										"description": "Obtain detailed information on a single product offered openly to the market"
									},
									"response": []
								}
							],
							"id": "b4f13814-9197-4e54-a3df-84f949456349"
						}
					],
					"id": "2ccdffb9-c157-4a1c-a7a8-d55bfdea92c2"
				},
				{
					"name": "common",
					"item": [
						{
							"name": "customer",
							"item": [
								{
									"name": "Get Customer",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"",
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)",
													"{",
													"        // Parse the response body",
													"        var jsonData;",
													"        try { jsonData = pm.response.json(); } catch(e) {}",
													"",
													"",
													"        // HTTP Response and headers",
													"        pm.test(\"Status code is 200\", function () {",
													"            pm.response.to.have.status(200);",
													"        });",
													"",
													"        pm.test(\"Content-Type header specifies json\", function () {",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
													"        });",
													"",
													"        pm.test(\"x-v header is present and has correct value\", function () {",
													"            var requestXv = parseInt(pm.variables.get(\"x-v\"));",
													"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
													"            var checkValue = Math.min(requestXv, requestMinXv);",
													"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
													"            pm.expect(responseXv).gte(checkValue);",
													"        });",
													"",
													"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {",
													"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));",
													"        });",
													"",
													"",
													"        // Schema payload check",
													"        pm.test('Response payload conforms to standards schema', function() {",
													"            const valid = ajv.validate(\"ResponseCommonCustomer\", jsonData)",
													"            if (!valid){",
													"            ajv.errors.forEach(element => {",
													"                console.log(JSON.stringify(element));",
													"                });",
													"            };",
													"            pm.expect(valid).to.be.true; ",
													"        });",
													"",
													"",
													" } else {",
													" \tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");",
													" }"
												],
												"type": "text/javascript"
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "3ceb4b38-a3f8-449e-9228-7083b491e2b7",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text"
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text"
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text"
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text"
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text"
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"url": {
											"raw": "{{authenticatedCommonUrl}}/common/customer",
											"host": [
												"{{authenticatedCommonUrl}}"
											],
											"path": [
												"common",
												"customer"
											]
										},
										"description": "Obtain basic information on the customer that has authorised the current session"
									},
									"response": []
								},
								{
									"name": "Get Customer Detail",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"if (utils.minimumVariablesProvided() == true && utils.accessTokenProvided() == true && utils.clientHeaderProvided() == true)\r",
													"{\r",
													"        // Parse the response body\r",
													"        var jsonData;\r",
													"        try { jsonData = pm.response.json(); } catch(e) {}\r",
													"\r",
													"\r",
													"        // HTTP Response and headers\r",
													"        pm.test(\"Status code is 200\", function () {\r",
													"            pm.response.to.have.status(200);\r",
													"        });\r",
													"\r",
													"        pm.test(\"Content-Type header specifies json\", function () {\r",
													"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
													"        });\r",
													"\r",
													"        pm.test(\"x-v header is present and has correct value\", function () {\r",
													"            var requestXv = parseInt(pm.variables.get(\"x-v\"));\r",
													"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));\r",
													"            var checkValue = Math.min(requestXv, requestMinXv);\r",
													"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));\r",
													"            pm.expect(responseXv).gte(checkValue);\r",
													"        });\r",
													"\r",
													"        pm.test(\"x-fapi-interaction-id header is present and has correct value\", function () {\r",
													"            pm.response.to.have.header(\"x-fapi-interaction-id\", pm.variables.get(\"interactionId\"));\r",
													"        });\r",
													"\r",
													"\r",
													"        pm.test('Schema is valid', function() {\r",
													"            const valid = ajv.validate(\"ResponseCommonCustomerDetailV2\", jsonData)\r",
													"            if (!valid){\r",
													"            ajv.errors.forEach(element => {\r",
													"                console.log(JSON.stringify(element));\r",
													"                });\r",
													"            };\r",
													"            pm.expect(valid).to.be.true; \r",
													"        });\r",
													"\r",
													"} else {\r",
													"\tconsole.error(\"Minimum variable set not defined for test: baseUrl, cdsClientHeader, accessToken\");\r",
													"}\r",
													"\r",
													"\r",
													"\r",
													"\r",
													"\r",
													""
												],
												"type": "text/javascript"
											}
										}
									],
									"id": "d9148e19-0978-4f73-b18c-35644d1d871d",
									"request": {
										"method": "GET",
										"header": [
											{
												"key": "x-v",
												"value": "{{x-v}}",
												"type": "text",
												"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
											},
											{
												"key": "x-min-v",
												"value": "{{x-min-v}}",
												"type": "text",
												"description": "Minimum version of the API end point requested by the client. Must be set to a positive integer if provided. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable."
											},
											{
												"key": "x-fapi-interaction-id",
												"value": "{{interactionId}}",
												"type": "text",
												"description": "An [RFC4122](https://tools.ietf.org/html/rfc4122) UID used as a correlation id. If provided, the data holder must play back this value in the x-fapi-interaction-id response header. If not provided a [RFC4122] UUID value is required to be provided in the response header to track the interaction."
											},
											{
												"key": "x-fapi-auth-date",
												"value": "{{timeTenMinutesAgo}}",
												"type": "text",
												"description": "The time when the customer last logged in to the data recipient. Required for all resource calls (customer present and unattended). Not to be included for unauthenticated calls."
											},
											{
												"key": "x-fapi-customer-ip-address",
												"value": "127.0.0.1",
												"type": "text",
												"description": "The customer's original IP address if the customer is currently logged in to the data recipient. The presence of this header indicates that the API is being called in a customer present context. Not to be included for unauthenticated calls."
											},
											{
												"key": "x-cds-client-headers",
												"value": "{{cdsClientHeader}}",
												"type": "text",
												"description": "The customer's original standard http headers [Base64](#common-field-types) encoded, including the original User Agent header, if the customer is currently logged in to the data recipient. Mandatory for customer present calls.  Not required for unattended or unauthenticated calls."
											},
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text",
												"description": "Subject identifier. Locally unique and never reassigned identifier within the Holder for the End-User. Mandatory for authenticated calls. Not required for unattended or unauthenticated calls."
											}
										],
										"url": {
											"raw": "{{authenticatedCommonUrl}}/common/customer/detail",
											"host": [
												"{{authenticatedCommonUrl}}"
											],
											"path": [
												"common",
												"customer",
												"detail"
											]
										},
										"description": "Obtain detailed information on the authorised customer within the current session."
									},
									"response": []
								}
							],
							"id": "fc201896-3ed8-4594-a604-27ac4761d7e2"
						}
					],
					"id": "0d0d1f7b-414d-4d6c-9525-93f2a68fef70"
				},
				{
					"name": "discovery",
					"item": [
						{
							"name": "Get Status",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"",
											"",
											"if (utils.minimumVariablesProvided() == true)",
											"{",
											"        // Parse the response body",
											"        var jsonData;",
											"        try { jsonData = pm.response.json(); } catch(e) {}",
											"",
											"",
											"        // HTTP Response and headers",
											"        pm.test(\"Status code is 200\", function () {",
											"            pm.response.to.have.status(200);",
											"        });",
											"",
											"        pm.test(\"Content-Type header specifies json\", function () {",
											"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
											"        });",
											"",
											"        pm.test(\"x-v header is present and has correct value\", function () {",
											"            var requestXv = parseInt(pm.variables.get(\"x-v\"));",
											"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
											"            var checkValue = Math.min(requestXv, requestMinXv);",
											"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
											"            pm.expect(responseXv).gte(checkValue);",
											"        });",
											"",
											"                // Schema payload check",
											"        pm.test('Response payload conforms to standards schema', function() {",
											"            const valid = ajv.validate(\"ResponseCommonDiscoveryStatus\", jsonData)",
											"            if (!valid){",
											"            ajv.errors.forEach(element => {",
											"                console.log(JSON.stringify(element));",
											"                });",
											"            };",
											"            pm.expect(valid).to.be.true; ",
											"        });   ",
											"} else {",
											"\tconsole.error(\"Minimum variable set not defined for test: baseUrl\");",
											"}",
											"",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"id": "badcd16a-b8ae-48ff-9a29-049b2e45be68",
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [
									{
										"key": "x-v",
										"value": "{{x-v}}",
										"type": "text",
										"description": "Version of the API end point requested by the client. Must be set to a positive integer. The data holder should respond with the highest supported version between [x-min-v](#request-headers) and [x-v](#request-headers). If the value of [x-min-v](#request-headers) is equal to or higher than the value of [x-v](#request-headers) then the [x-min-v](#request-headers) header should be treated as absent. If all versions requested are not supported then the data holder should respond with a 406 Not Acceptable. See [HTTP Headers](#request-headers)"
									},
									{
										"key": "x-min-v",
										"value": "{{x-min-v}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{unauthenticatedCommonUrl}}/discovery/status",
									"host": [
										"{{unauthenticatedCommonUrl}}"
									],
									"path": [
										"discovery",
										"status"
									]
								},
								"description": "Obtain a health check status for the implementation"
							},
							"response": []
						},
						{
							"name": "Get Outages",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"",
											"",
											"if (utils.minimumVariablesProvided() == true)",
											"{",
											"        // Parse the response body",
											"        var jsonData;",
											"        try { jsonData = pm.response.json(); } catch(e) {}",
											"",
											"",
											"        // HTTP Response and headers",
											"        pm.test(\"Status code is 200\", function () {",
											"            pm.response.to.have.status(200);",
											"        });",
											"",
											"        pm.test(\"Content-Type header specifies json\", function () {",
											"            pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");",
											"        });",
											"",
											"        pm.test(\"x-v header is present and has correct value\", function () {",
											"            var requestXv = parseInt(pm.variables.get(\"x-v\"));",
											"            var requestMinXv = parseInt(pm.variables.get(\"x-min-v\"));",
											"            var checkValue = Math.min(requestXv, requestMinXv);",
											"            var responseXv = parseInt(pm.response.headers.get(\"x-v\"));",
											"            pm.expect(responseXv).gte(checkValue);",
											"        });",
											"",
											"            // Schema payload check",
											"        pm.test('Response payload conforms to standards schema', function() {",
											"            const valid = ajv.validate(\"ResponseDiscoveryOutagesList\", jsonData)",
											"            if (!valid){",
											"            ajv.errors.forEach(element => {",
											"                console.log(JSON.stringify(element));",
											"                });",
											"            };",
											"            pm.expect(valid).to.be.true; ",
											"        });",
											"",
											"} else {",
											"\tconsole.error(\"Minimum variable set not defined for test: baseUrl\");",
											"}",
											"",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"id": "c8d9dc11-b578-4ba3-961c-2ad857d8c3cb",
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [
									{
										"key": "x-v",
										"value": "{{x-v}}",
										"type": "text"
									},
									{
										"key": "x-min-v",
										"value": "{{x-min-v}}",
										"type": "text"
									},
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"url": {
									"raw": "{{unauthenticatedCommonUrl}}/discovery/outages",
									"host": [
										"{{unauthenticatedCommonUrl}}"
									],
									"path": [
										"discovery",
										"outages"
									]
								},
								"description": "Obtain a list of scheduled outages for the implementation"
							},
							"response": []
						}
					],
					"id": "92fd4997-49c9-4313-b742-a768851a6d68"
				}
			],
			"id": "94138afe-3173-4273-ac1c-2555160bb2f3"
		},
		{
			"name": "Specialised Tests",
			"item": [],
			"id": "9fd44baf-d507-41d4-87ec-7f02bd783186"
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{accessToken}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"",
					"",
					"if (pm.iterationData.get(\"baseUrl\") != undefined)",
					"    pm.collectionVariables.set(\"baseUrl\", pm.iterationData.get(\"baseUrl\"));",
					"",
					"if (pm.iterationData.get(\"authenticatedResourceUrl\") != undefined)",
					"    pm.collectionVariables.set(\"authenticatedResourceUrl\", pm.iterationData.get(\"authenticatedResourceUrl\"));",
					"",
					"if (pm.iterationData.get(\"unauthenticatedResourceUrl\") != undefined)",
					"    pm.collectionVariables.set(\"unauthenticatedResourceUrl\", pm.iterationData.get(\"unauthenticatedResourceUrl\"));",
					"",
					"if (pm.iterationData.get(\"authenticatedCommonUrl\") != undefined)",
					"    pm.collectionVariables.set(\"authenticatedCommonUrl\", pm.iterationData.get(\"authenticatedCommonUrl\"));",
					"",
					"if (pm.iterationData.get(\"unauthenticatedCommonUrl\") != undefined)",
					"    pm.collectionVariables.set(\"unauthenticatedCommonUrl\", pm.iterationData.get(\"unauthenticatedCommonUrl\"));",
					"",
					"",
					"if (pm.iterationData.get(\"version\") != undefined)",
					"    pm.collectionVariables.set(\"version\", pm.iterationData.get(\"version\"));    ",
					"",
					"if (pm.iterationData.get(\"x-v\") != undefined)",
					"    pm.collectionVariables.set(\"x-v\", pm.iterationData.get(\"x-v\"));",
					"",
					"if (pm.iterationData.get(\"x-min-v\") != undefined)",
					"    pm.collectionVariables.set(\"x-min-v\", pm.iterationData.get(\"x-min-v\"));",
					"",
					"if (pm.iterationData.get(\"accessToken\") != undefined)",
					"    pm.collectionVariables.set(\"accessToken\", pm.iterationData.get(\"accessToken\"));",
					"",
					"if (pm.iterationData.get(\"cdsClientHeader\") != undefined)",
					"    pm.collectionVariables.set(\"cdsClientHeader\", pm.iterationData.get(\"cdsClientHeader\"));",
					"",
					"if (pm.iterationData.get(\"testAccountId1\") != undefined)",
					"    pm.collectionVariables.set(\"testAccountId1\", pm.iterationData.get(\"testAccountId1\"));",
					"",
					"if (pm.iterationData.get(\"testAccountId2\") != undefined)",
					"    pm.collectionVariables.set(\"testAccountId2\", pm.iterationData.get(\"testAccountId2\"));",
					"",
					"if (pm.iterationData.get(\"testProductId\") != undefined)",
					"    pm.collectionVariables.set(\"testProductId\", pm.iterationData.get(\"testProductId\")); ",
					"",
					"if (pm.iterationData.get(\"testPayeeId\") != undefined)",
					"    pm.collectionVariables.set(\"testPayeeId\", pm.iterationData.get(\"testPayeeId\")); ",
					"",
					"if (pm.iterationData.get(\"testTransactionId\") != undefined)",
					"    pm.collectionVariables.set(\"testTransactionId\", pm.iterationData.get(\"testTransactionId\"));    ",
					"",
					"if (pm.iterationData.get(\"pageSizeBulkDirectDebits\") != undefined)",
					"    pm.collectionVariables.set(\"pageSizeBulkDirectDebits\", pm.iterationData.get(\"pageSizeBulkDirectDebits\"));",
					"",
					"if (pm.iterationData.get(\"pageSizeBulkBalances\") != undefined)",
					"    pm.collectionVariables.set(\"pageSizeBulkBalances\", pm.iterationData.get(\"pageSizeBulkBalances\")); ",
					"",
					"if (pm.iterationData.get(\"pageSizeTransactions\") != undefined)",
					"    pm.collectionVariables.set(\"pageSizeTransactions\", pm.iterationData.get(\"pageSizeTransactions\")); ",
					"",
					"if (pm.iterationData.get(\"pageSizeAccounts\") != undefined)",
					"    pm.collectionVariables.set(\"pageSizeAccounts\", pm.iterationData.get(\"pageSizeAccounts\"));   ",
					"",
					"if (pm.iterationData.get(\"pageSizePayees\") != undefined)",
					"    pm.collectionVariables.set(\"pageSizePayees\", pm.iterationData.get(\"pageSizePayees\"));",
					"",
					"if (pm.iterationData.get(\"pageSizeScheduledPayments\") != undefined)",
					"    pm.collectionVariables.set(\"pageSizeScheduledPayments\", pm.iterationData.get(\"pageSizeScheduledPayments\")); ",
					"",
					"if (pm.iterationData.get(\"pageSizeProducts\") != undefined)",
					"    pm.collectionVariables.set(\"pageSizeProducts\", pm.iterationData.get(\"pageSizeProducts\")); ",
					"",
					"if (pm.iterationData.get(\"pageSize\") != undefined)",
					"    pm.collectionVariables.set(\"pageSize\", pm.iterationData.get(\"pageSize\"));           ",
					"",
					"// Initialise only once",
					"if (pm.variables.get(\"intitalised\") == 0 || pm.variables.get(\"intitalised\") == null) {",
					"let Ajv = require('ajv');",
					"ajv = new Ajv({logger: console});",
					"    pm.variables.set(\"intitalised\",1);",
					"",
					"    // Set some time relevant time stamps",
					"    console.log(\"Pre-request: Setting common variables\")",
					"    var timeCurrent = new Date();",
					"",
					"    var timeTenMinutesAgo = new Date(timeCurrent.getFullYear(),",
					"                                    timeCurrent.getMonth(),",
					"                                    timeCurrent.getDate(),",
					"                                    timeCurrent.getHours(),",
					"                                    timeCurrent.getMinutes()-10,",
					"                                    timeCurrent.getSeconds());",
					"    var dateToday = new Date(timeCurrent.getFullYear(),",
					"                            timeCurrent.getMonth(),",
					"                            timeCurrent.getDate(), 0, 0, 0);",
					"    var dateYesterday = new Date(timeCurrent.getFullYear(),",
					"                                timeCurrent.getMonth(),",
					"                                timeCurrent.getDate() - 1, 0, 0, 0);",
					"    var dateTomorrow = new Date(timeCurrent.getFullYear(),",
					"                                timeCurrent.getMonth(),",
					"                                timeCurrent.getDate() + 1, 0, 0, 0);",
					"    var dateLastYear = new Date(timeCurrent.getFullYear() - 1,",
					"                                timeCurrent.getMonth(),",
					"                                timeCurrent.getDate(), 0, 0, 0);",
					"",
					"    postman.setEnvironmentVariable(\"timeCurrent\", timeCurrent.toISOString());",
					"    postman.setEnvironmentVariable(\"timeTenMinutesAgo\", timeCurrent.toISOString());",
					"    postman.setEnvironmentVariable(\"dateToday\", dateToday.toISOString());",
					"    postman.setEnvironmentVariable(\"dateYesterday\", dateYesterday.toISOString());",
					"    postman.setEnvironmentVariable(\"dateTomorrow\", dateTomorrow.toISOString());",
					"    postman.setEnvironmentVariable(\"dateLastYear\", dateTomorrow.toISOString());",
					"",
					"",
					"    // setting the base url for schema files",
					"    var version = pm.collectionVariables.get(\"version\");",
					"",
					"    var urlBankingSchemaValidationFileDirectory = \"https://raw.githubusercontent.com/ConsumerDataStandardsAustralia/dsb-schema-tools/main/1.15.0/postman/postman-validation-banking-1.15.0.json\";",
					"    // var urlBankingSchemaValidationFileDirectory = \"http://localhost:8080/\" + version + \"/postman/postman-validation-banking-1.15.0.json\";",
					"",
					"",
					"    pm.sendRequest(urlBankingSchemaValidationFileDirectory, (error, responseBanking) => {",
					"        console.log(\"Reading schema files for banking....\"); ",
					"        if (error) {",
					"            console.log('Getting schema returned: ' + error);",
					"        } else {",
					"            ",
					"            try { ",
					"                let bankingSchemaCount = 0;",
					"                let bankingSchemaAdded = 0;",
					"                schemaBanking = responseBanking.json();",
					"                //let schemaBanking = pm.collectionVariables.get(\"GlobalBankingSchema\");  ",
					"                for (var key in schemaBanking) {",
					"                    bankingSchemaCount++;",
					"                    if (schemaBanking.hasOwnProperty(key)) {",
					"                        schemaBanking[key].$id = key;",
					"                        try {",
					"                            ajv.addSchema(schemaBanking[key]);",
					"                            bankingSchemaAdded++;",
					"                        }",
					"                        catch(ex){",
					"                            console.log(\"Exception in \" + key + \" : \" + JSON.stringify(ex));",
					"                        }",
					"                        ",
					"                    }",
					"                }",
					"                console.log(\"Banking schema contains \" + bankingSchemaCount + \" entries\") ;",
					"                console.log(\"Added \" + bankingSchemaAdded + \" schemas from Banking\"); ",
					"            } catch(e) {",
					"                console.log(\"Exception :\" + JSON.stringify(e));",
					"            }",
					"            pm.collectionVariables.set(\"GlobalBankingSchema\", schemaBanking);        ",
					"        }",
					"    }); ",
					"",
					"    // pm.sendRequest(urlCommonSchemaValidationFileDirectory, (error, responseCommon) => {",
					"    //     console.log(\"Reading schema files for Common....\"); ",
					"    //     if (error) {",
					"    //         console.log('Getting schema returned: ' + error);",
					"    //     } else {",
					"            ",
					"    //         try { ",
					"    //             let commonSchemaCount = 0;",
					"    //             let commonSchemaAdded = 0;",
					"    //             schemaCommon = responseCommon.json();",
					"    //             //let schemaBanking = pm.collectionVariables.get(\"GlobalCommonSchema\");  ",
					"    //             for (var key in schemaCommon) {",
					"    //                 commonSchemaCount++;",
					"    //                 if (schemaCommon.hasOwnProperty(key)) {",
					"    //                     schemaCommon[key].$id = key;",
					"    //                     try {",
					"    //                         ajv.addSchema(schemaCommon[key]);",
					"    //                         commonSchemaAdded++;",
					"    //                     }",
					"    //                     catch(ex){",
					"    //                     console.log(\"Exception :\" + JSON.stringify(ex));",
					"    //                     }",
					"                        ",
					"    //                 }",
					"    //             }",
					"    //             console.log(\"Common schema contains \" + commonSchemaCount + \" entries\") ;",
					"    //             console.log(\"Added \" + commonSchemaAdded + \" schemas from Common\"); ",
					"    //         } catch(e) {}",
					"    //         pm.collectionVariables.set(\"GlobalCommonSchema\", schemaCommon);        ",
					"    //     }",
					"    // }); ",
					"  }",
					"",
					"",
					"// This is used for pagination to determine if this is the first page, last page, middle page or",
					"// a single page response",
					"utils = {",
					"    whichPage: function (currPage, totalPages, totalRecords, pageSize ) {",
					"        if (pageSize == null) {pageSize = 25};",
					"        ",
					"        if (currPage == null) {currPage = 1};",
					"",
					"        if (totalPages <= 1 ) return 0;",
					"",
					"        if (totalRecords <= pageSize || (totalRecords > pageSize &&  currPage == 1)) return 1;   ",
					"",
					"        if (currPage > 1 && currPage < totalPages ){ return 2}",
					"",
					"        if (currPage == totalPages ){ return 3}",
					"    },",
					"    minimumVariablesProvided: function ( ) {",
					"        if (pm.variables.get(\"baseUrl\") != \"\" && pm.variables.get(\"x-v\") != \"\")",
					"            return true;",
					"        else",
					"            return false;",
					"    },",
					"    clientHeaderProvided: function ( ) {",
					"        if (pm.variables.get(\"cdsClientHeader\") != \"\" )",
					"            return true;",
					"        else",
					"            return false;",
					"    },",
					"    accessTokenProvided: function ( ) {",
					"        if (pm.variables.get(\"accessToken\") != \"\")",
					"            return true;",
					"        else",
					"            return false;",
					"    }",
					"};",
					"",
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "540c1e99-88df-423d-8fe5-c5f083ae3653",
			"key": "interactionId",
			"value": "37e3194e-c1f3-4685-8b8d-6cea463f37f4"
		},
		{
			"id": "6ac48076-c017-4bed-a217-40468f1dfc11",
			"key": "cdsClientHeader",
			"value": "Q29uc3VtZXIgRGF0YSBSaWdodA=="
		},
		{
			"id": "30ee404b-1f80-4d84-9ec6-734b17858ae6",
			"key": "invalidId",
			"value": "xxxINVALIDxxx"
		},
		{
			"id": "64ed4665-d3e6-4132-96c0-6b893a8e3441",
			"key": "effective",
			"value": ""
		},
		{
			"id": "6b6c47d4-eaae-474d-8602-a0c63fdcf0db",
			"key": "totalDirectDebitPages",
			"value": ""
		},
		{
			"id": "bb0e8032-5bf2-463a-b159-8b2fc4867125",
			"key": "pageArray",
			"value": ""
		},
		{
			"id": "50718576-c49b-43fa-9002-e3553de9fc8d",
			"key": "totalBulkBalancePages",
			"value": ""
		},
		{
			"id": "e1613c38-a53e-48dd-9b86-3ee5f86543e4",
			"key": "totalTransactionPages",
			"value": ""
		},
		{
			"id": "0f478013-9f4c-416f-8705-adc4f88707d5",
			"key": "totalScheduledPaymentsPages",
			"value": ""
		},
		{
			"id": "2e7c39ea-e8b3-4781-a732-0e43dc759b03",
			"key": "totalAccountsPages",
			"value": ""
		},
		{
			"id": "6f9e8d9d-4fca-4f02-8d61-9484e22b4987",
			"key": "totalPayeePages",
			"value": ""
		},
		{
			"id": "f8014e8b-b1c9-478b-9648-02b35ba4c284",
			"key": "productCategory",
			"value": ""
		},
		{
			"id": "f9b158bc-b8e5-46f8-8549-ada2a8358b0a",
			"key": "totalProductPages",
			"value": ""
		},
		{
			"id": "d1a8c617-0028-4bd5-9e0b-31a9147b52ac",
			"key": "baseUrl",
			"value": ""
		},
		{
			"id": "987216f8-fdef-48a7-b8c7-71caf6c710fd",
			"key": "version",
			"value": "1.15.0"
		},
		{
			"id": "e57d48e4-0bf8-4608-a63f-ea6741b5ee99",
			"key": "x-v",
			"value": ""
		},
		{
			"id": "8fd843d4-339b-44e2-b9e0-89a3f59db0b7",
			"key": "x-min-v",
			"value": ""
		},
		{
			"id": "db92cac5-b2a9-4166-8881-c54e1d7fefd3",
			"key": "accessToken",
			"value": ""
		},
		{
			"id": "b066c2ab-302c-4f3e-a194-0836faca4712",
			"key": "testAccountId1",
			"value": ""
		},
		{
			"id": "87df4ead-31c8-43f9-899f-ed91b554b0ba",
			"key": "testAccountId2",
			"value": ""
		},
		{
			"id": "12207715-748a-4c93-9dd3-85c787615dde",
			"key": "testProductId",
			"value": ""
		},
		{
			"id": "624733b8-54b1-4fda-9538-97182d617f93",
			"key": "testPayeeId",
			"value": ""
		},
		{
			"id": "7f94fb00-24f6-4388-b316-d92248e438a4",
			"key": "testTransactionId",
			"value": ""
		},
		{
			"id": "725ec934-3944-4af2-ad2d-527c10e08229",
			"key": "pageSizeBulkDirectDebits",
			"value": ""
		},
		{
			"id": "fd07d892-6c6c-4b36-92c5-ac2867829fdb",
			"key": "pageSizeBulkBalances",
			"value": ""
		},
		{
			"id": "95f0a4e3-d18b-4356-bf6e-36df56a418c6",
			"key": "pageSizeTransactions",
			"value": ""
		},
		{
			"id": "ea78acfe-3ea4-4fc1-b72e-1371ab2f4d14",
			"key": "pageSizeAccounts",
			"value": ""
		},
		{
			"id": "6facf4c2-09c4-44ae-815c-cce077fbe5a2",
			"key": "pageSizePayees",
			"value": ""
		},
		{
			"id": "33bee172-4022-4401-8332-99ae1d4c2b86",
			"key": "pageSizeScheduledPayments",
			"value": ""
		},
		{
			"id": "80f101a3-19e9-41d0-9b9f-6328df772bc9",
			"key": "pageSizeProducts",
			"value": ""
		},
		{
			"id": "cebba568-8088-49b3-8d64-e9aa148cbde2",
			"key": "collectionVariables",
			"value": ""
		},
		{
			"id": "a02b42a1-2b4d-4db7-a8a0-5c10cd216e6c",
			"key": "intitalised",
			"value": ""
		},
		{
			"id": "8a151428-7a6b-47b6-a6df-dfe5dbc8bfd5",
			"key": "pageSize",
			"value": ""
		},
		{
			"id": "f5cb4b32-7a6d-498d-923d-57ac18627a9d",
			"key": "BankingBalance",
			"value": ""
		},
		{
			"id": "89c8e0e2-0ce5-4c76-932a-2a0cd8fe43ee",
			"key": "ResponseBankingAccountsBalanceList",
			"value": ""
		},
		{
			"id": "39420012-0459-46ac-92e2-0af370a43b7d",
			"key": "ResponseBankingTransactionList",
			"value": ""
		},
		{
			"id": "26cf2c7e-f14b-42ff-9542-90a98d9505a8",
			"key": "ResponseBankingAccountList",
			"value": ""
		},
		{
			"id": "cbe18dc9-10e2-4910-b888-89c7e619a427",
			"key": "ResponseBankingAccountsBalanceById",
			"value": ""
		},
		{
			"id": "aff672e9-bcb7-4ec1-9a93-f48734ee1943",
			"key": "ResponseCommonCustomerDetailV2",
			"value": ""
		},
		{
			"id": "bcee4f8a-50bf-4241-9958-a015f2d3d4ed",
			"key": "ResponseBankingDirectDebitAuthorisationList",
			"value": ""
		},
		{
			"id": "7e6a517a-de15-4b66-86f6-0eb02b3c3ed8",
			"key": "ResponseBankingPayeeListV2",
			"value": ""
		},
		{
			"id": "4945c7c4-3366-4c25-93c8-cc74c0264273",
			"key": "ResponseBankingAccountByIdV2",
			"value": ""
		},
		{
			"id": "07bf4ae0-f20a-4b37-acc2-8f9e969d8ffe",
			"key": "ResponseBankingScheduledPaymentsList",
			"value": ""
		},
		{
			"id": "a6dda0ff-b067-4ae1-aa54-c420d80353c4",
			"key": "ResponseBankingProductListV2",
			"value": ""
		},
		{
			"id": "0507bfe0-f3b7-4582-806c-3a5251e8d1d1",
			"key": "ResponseBankingPayeeByIdV2",
			"value": ""
		},
		{
			"id": "7aa5e9d7-148c-4544-a9be-01dc2ebfa219",
			"key": "ResponseBankingTransactionById",
			"value": ""
		},
		{
			"id": "dae1c0b3-e808-473f-8a37-1388ebe32eab",
			"key": "ResponseCommonCustomer",
			"value": ""
		},
		{
			"id": "cbc99dd9-c19e-4bc6-ab3b-af925f09ad91",
			"key": "ResponseDiscoveryOutagesList",
			"value": ""
		},
		{
			"id": "9c49aba0-d6ad-4d52-8361-1e015f553a2e",
			"key": "ResponseCommonDiscoveryStatus",
			"value": ""
		},
		{
			"id": "64a56105-20ba-4a5e-81a3-e23c37f31bf2",
			"key": "ResponseErrorListV2",
			"value": ""
		},
		{
			"id": "e7589d72-e6eb-4968-8417-86b5223127ce",
			"key": "ResponseBankingProductByIdV4",
			"value": ""
		},
		{
			"id": "21bfef1f-9e56-4527-80b5-383a5bcecdeb",
			"key": "GlobalSchema",
			"value": ""
		},
		{
			"id": "301a12af-8969-4676-bc16-27c76c5996f5",
			"key": "unauthenticatedCommonUrl",
			"value": ""
		},
		{
			"id": "3ff82e20-10ed-43b8-a238-db06cb2c67c7",
			"key": "authenticatedCommonUrl",
			"value": ""
		},
		{
			"id": "e22852b9-9fee-4cef-8b36-eef14ad72edf",
			"key": "unauthenticatedResourceUrl",
			"value": ""
		},
		{
			"id": "c18db5f4-cb82-403f-990c-e7c813dd95fc",
			"key": "authenticatedResourceUrl",
			"value": ""
		},
		{
			"id": "be47e61e-8e6f-4561-b412-8bbc565a52c0",
			"key": "GlobalBankingSchema",
			"value": ""
		},
		{
			"id": "67a49834-5506-4aa0-9c6f-3993abc6c603",
			"key": "GlobalCommonSchema",
			"value": ""
		}
	]
}